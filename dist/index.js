#!/usr/bin/env node
"use strict";var t=require("events"),e=require("child_process"),n=require("path"),r=require("fs"),i=require("process"),o=require("os"),s=require("tty"),a=require("constants"),c=require("stream"),l=require("util"),u=require("assert"),h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},p={exports:{}},d={},f={};let m=class extends Error{constructor(t,e,n){super(n),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=e,this.exitCode=t,this.nestedError=void 0}};f.CommanderError=m,f.InvalidArgumentError=class extends m{constructor(t){super(1,"commander.invalidArgument",t),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};const{InvalidArgumentError:g}=f;d.Argument=class{constructor(t,e){switch(this.description=e||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,t[0]){case"<":this.required=!0,this._name=t.slice(1,-1);break;case"[":this.required=!1,this._name=t.slice(1,-1);break;default:this.required=!0,this._name=t}this._name.length>3&&"..."===this._name.slice(-3)&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}argParser(t){return this.parseArg=t,this}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,e)=>{if(!this.argChoices.includes(t))throw new g(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,e):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}},d.humanReadableArgName=function(t){const e=t.name()+(!0===t.variadic?"...":"");return t.required?"<"+e+">":"["+e+"]"};var y={},w={};const{humanReadableArgName:b}=d;w.Help=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(t){const e=t.commands.filter(t=>!t._hidden);if(t._hasImplicitHelpCommand()){const[,n,r]=t._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),i=t.createCommand(n).helpOption(!1);i.description(t._helpCommandDescription),r&&i.arguments(r),e.push(i)}return this.sortSubcommands&&e.sort((t,e)=>t.name().localeCompare(e.name())),e}compareOptions(t,e){const getSortKey=t=>t.short?t.short.replace(/^-/,""):t.long.replace(/^--/,"");return getSortKey(t).localeCompare(getSortKey(e))}visibleOptions(t){const e=t.options.filter(t=>!t.hidden),n=t._hasHelpOption&&t._helpShortFlag&&!t._findOption(t._helpShortFlag),r=t._hasHelpOption&&!t._findOption(t._helpLongFlag);if(n||r){let i;i=n?r?t.createOption(t._helpFlags,t._helpDescription):t.createOption(t._helpShortFlag,t._helpDescription):t.createOption(t._helpLongFlag,t._helpDescription),e.push(i)}return this.sortOptions&&e.sort(this.compareOptions),e}visibleGlobalOptions(t){if(!this.showGlobalOptions)return[];const e=[];for(let n=t.parent;n;n=n.parent){const t=n.options.filter(t=>!t.hidden);e.push(...t)}return this.sortOptions&&e.sort(this.compareOptions),e}visibleArguments(t){return t._argsDescription&&t.registeredArguments.forEach(e=>{e.description=e.description||t._argsDescription[e.name()]||""}),t.registeredArguments.find(t=>t.description)?t.registeredArguments:[]}subcommandTerm(t){const e=t.registeredArguments.map(t=>b(t)).join(" ");return t._name+(t._aliases[0]?"|"+t._aliases[0]:"")+(t.options.length?" [options]":"")+(e?" "+e:"")}optionTerm(t){return t.flags}argumentTerm(t){return t.name()}longestSubcommandTermLength(t,e){return e.visibleCommands(t).reduce((t,n)=>Math.max(t,e.subcommandTerm(n).length),0)}longestOptionTermLength(t,e){return e.visibleOptions(t).reduce((t,n)=>Math.max(t,e.optionTerm(n).length),0)}longestGlobalOptionTermLength(t,e){return e.visibleGlobalOptions(t).reduce((t,n)=>Math.max(t,e.optionTerm(n).length),0)}longestArgumentTermLength(t,e){return e.visibleArguments(t).reduce((t,n)=>Math.max(t,e.argumentTerm(n).length),0)}commandUsage(t){let e=t._name;t._aliases[0]&&(e=e+"|"+t._aliases[0]);let n="";for(let e=t.parent;e;e=e.parent)n=e.name()+" "+n;return n+e+" "+t.usage()}commandDescription(t){return t.description()}subcommandDescription(t){return t.summary()||t.description()}optionDescription(t){const e=[];if(t.argChoices&&e.push(`choices: ${t.argChoices.map(t=>JSON.stringify(t)).join(", ")}`),void 0!==t.defaultValue){(t.required||t.optional||t.isBoolean()&&"boolean"==typeof t.defaultValue)&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`)}return void 0!==t.presetArg&&t.optional&&e.push(`preset: ${JSON.stringify(t.presetArg)}`),void 0!==t.envVar&&e.push(`env: ${t.envVar}`),e.length>0?`${t.description} (${e.join(", ")})`:t.description}argumentDescription(t){const e=[];if(t.argChoices&&e.push(`choices: ${t.argChoices.map(t=>JSON.stringify(t)).join(", ")}`),void 0!==t.defaultValue&&e.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),e.length>0){const n=`(${e.join(", ")})`;return t.description?`${t.description} ${n}`:n}return t.description}formatHelp(t,e){const n=e.padWidth(t,e),r=e.helpWidth||80;function formatItem(t,i){if(i){const o=`${t.padEnd(n+2)}${i}`;return e.wrap(o,r-2,n+2)}return t}function formatList(t){return t.join("\n").replace(/^/gm," ".repeat(2))}let i=[`Usage: ${e.commandUsage(t)}`,""];const o=e.commandDescription(t);o.length>0&&(i=i.concat([e.wrap(o,r,0),""]));const s=e.visibleArguments(t).map(t=>formatItem(e.argumentTerm(t),e.argumentDescription(t)));s.length>0&&(i=i.concat(["Arguments:",formatList(s),""]));const a=e.visibleOptions(t).map(t=>formatItem(e.optionTerm(t),e.optionDescription(t)));if(a.length>0&&(i=i.concat(["Options:",formatList(a),""])),this.showGlobalOptions){const n=e.visibleGlobalOptions(t).map(t=>formatItem(e.optionTerm(t),e.optionDescription(t)));n.length>0&&(i=i.concat(["Global Options:",formatList(n),""]))}const c=e.visibleCommands(t).map(t=>formatItem(e.subcommandTerm(t),e.subcommandDescription(t)));return c.length>0&&(i=i.concat(["Commands:",formatList(c),""])),i.join("\n")}padWidth(t,e){return Math.max(e.longestOptionTermLength(t,e),e.longestGlobalOptionTermLength(t,e),e.longestSubcommandTermLength(t,e),e.longestArgumentTermLength(t,e))}wrap(t,e,n,r=40){const i=new RegExp("[\\n][ \\f\\t\\v   -   　\ufeff]+");if(t.match(i))return t;const o=e-n;if(o<r)return t;const s=t.slice(0,n),a=t.slice(n).replace("\r\n","\n"),c=" ".repeat(n),l="\\s​",u=new RegExp(`\n|.{1,${o-1}}([${l}]|$)|[^${l}]+?([${l}]|$)`,"g");return s+(a.match(u)||[]).map((t,e)=>"\n"===t?"":(e>0?c:"")+t.trimEnd()).join("\n")}};var v={};const{InvalidArgumentError:_}=f;function splitOptionFlags$1(t){let e,n;const r=t.split(/[ |,]+/);return r.length>1&&!/^[[<]/.test(r[1])&&(e=r.shift()),n=r.shift(),!e&&/^-[^-]$/.test(n)&&(e=n,n=void 0),{shortFlag:e,longFlag:n}}v.Option=class{constructor(t,e){this.flags=t,this.description=e||"",this.required=t.includes("<"),this.optional=t.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(t),this.mandatory=!1;const n=splitOptionFlags$1(t);this.short=n.shortFlag,this.long=n.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(t,e){return this.defaultValue=t,this.defaultValueDescription=e,this}preset(t){return this.presetArg=t,this}conflicts(t){return this.conflictsWith=this.conflictsWith.concat(t),this}implies(t){let e=t;return"string"==typeof t&&(e={[t]:!0}),this.implied=Object.assign(this.implied||{},e),this}env(t){return this.envVar=t,this}argParser(t){return this.parseArg=t,this}makeOptionMandatory(t=!0){return this.mandatory=!!t,this}hideHelp(t=!0){return this.hidden=!!t,this}_concatValue(t,e){return e!==this.defaultValue&&Array.isArray(e)?e.concat(t):[t]}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,e)=>{if(!this.argChoices.includes(t))throw new _(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,e):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.name().replace(/^no-/,"").split("-").reduce((t,e)=>t+e[0].toUpperCase()+e.slice(1))}is(t){return this.short===t||this.long===t}isBoolean(){return!this.required&&!this.optional&&!this.negate}},v.splitOptionFlags=splitOptionFlags$1,v.DualOptions=class{constructor(t){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,t.forEach(t=>{t.negate?this.negativeOptions.set(t.attributeName(),t):this.positiveOptions.set(t.attributeName(),t)}),this.negativeOptions.forEach((t,e)=>{this.positiveOptions.has(e)&&this.dualOptions.add(e)})}valueFromOption(t,e){const n=e.attributeName();if(!this.dualOptions.has(n))return!0;const r=this.negativeOptions.get(n).presetArg,i=void 0!==r&&r;return e.negate===(i===t)}};var S={};S.suggestSimilar=function(t,e){if(!e||0===e.length)return"";e=Array.from(new Set(e));const n=t.startsWith("--");n&&(t=t.slice(2),e=e.map(t=>t.slice(2)));let r=[],i=3;return e.forEach(e=>{if(e.length<=1)return;const n=function(t,e){if(Math.abs(t.length-e.length)>3)return Math.max(t.length,e.length);const n=[];for(let e=0;e<=t.length;e++)n[e]=[e];for(let t=0;t<=e.length;t++)n[0][t]=t;for(let r=1;r<=e.length;r++)for(let i=1;i<=t.length;i++){let o=1;o=t[i-1]===e[r-1]?0:1,n[i][r]=Math.min(n[i-1][r]+1,n[i][r-1]+1,n[i-1][r-1]+o),i>1&&r>1&&t[i-1]===e[r-2]&&t[i-2]===e[r-1]&&(n[i][r]=Math.min(n[i][r],n[i-2][r-2]+1))}return n[t.length][e.length]}(t,e),o=Math.max(t.length,e.length);(o-n)/o>.4&&(n<i?(i=n,r=[e]):n===i&&r.push(e))}),r.sort((t,e)=>t.localeCompare(e)),n&&(r=r.map(t=>`--${t}`)),r.length>1?`\n(Did you mean one of ${r.join(", ")}?)`:1===r.length?`\n(Did you mean ${r[0]}?)`:""};const O=t.EventEmitter,C=e,E=n,k=r,A=i,{Argument:x,humanReadableArgName:F}=d,{CommanderError:$}=f,{Help:P}=w,{Option:N,splitOptionFlags:I,DualOptions:D}=v,{suggestSimilar:M}=S;function outputHelpIfRequested(t,e){t._hasHelpOption&&e.find(e=>e===t._helpLongFlag||e===t._helpShortFlag)&&(t.outputHelp(),t._exit(0,"commander.helpDisplayed","(outputHelp)"))}function incrementNodeInspectorPort(t){return t.map(t=>{if(!t.startsWith("--inspect"))return t;let e,n,r="127.0.0.1",i="9229";return null!==(n=t.match(/^(--inspect(-brk)?)$/))?e=n[1]:null!==(n=t.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(e=n[1],/^\d+$/.test(n[3])?i=n[3]:r=n[3]):null!==(n=t.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(e=n[1],r=n[3],i=n[4]),e&&"0"!==i?`${e}=${r}:${parseInt(i)+1}`:t})}y.Command=class t extends O{constructor(t){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=t||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:t=>A.stdout.write(t),writeErr:t=>A.stderr.write(t),getOutHelpWidth:()=>A.stdout.isTTY?A.stdout.columns:void 0,getErrHelpWidth:()=>A.stderr.isTTY?A.stderr.columns:void 0,outputError:(t,e)=>e(t)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(t){return this._outputConfiguration=t._outputConfiguration,this._hasHelpOption=t._hasHelpOption,this._helpFlags=t._helpFlags,this._helpDescription=t._helpDescription,this._helpShortFlag=t._helpShortFlag,this._helpLongFlag=t._helpLongFlag,this._helpCommandName=t._helpCommandName,this._helpCommandnameAndArgs=t._helpCommandnameAndArgs,this._helpCommandDescription=t._helpCommandDescription,this._helpConfiguration=t._helpConfiguration,this._exitCallback=t._exitCallback,this._storeOptionsAsProperties=t._storeOptionsAsProperties,this._combineFlagAndOptionalValue=t._combineFlagAndOptionalValue,this._allowExcessArguments=t._allowExcessArguments,this._enablePositionalOptions=t._enablePositionalOptions,this._showHelpAfterError=t._showHelpAfterError,this._showSuggestionAfterError=t._showSuggestionAfterError,this}_getCommandAndAncestors(){const t=[];for(let e=this;e;e=e.parent)t.push(e);return t}command(t,e,n){let r=e,i=n;"object"==typeof r&&null!==r&&(i=r,r=null),i=i||{};const[,o,s]=t.match(/([^ ]+) *(.*)/),a=this.createCommand(o);return r&&(a.description(r),a._executableHandler=!0),i.isDefault&&(this._defaultCommandName=a._name),a._hidden=!(!i.noHelp&&!i.hidden),a._executableFile=i.executableFile||null,s&&a.arguments(s),this.commands.push(a),a.parent=this,a.copyInheritedSettings(this),r?this:a}createCommand(e){return new t(e)}createHelp(){return Object.assign(new P,this.configureHelp())}configureHelp(t){return void 0===t?this._helpConfiguration:(this._helpConfiguration=t,this)}configureOutput(t){return void 0===t?this._outputConfiguration:(Object.assign(this._outputConfiguration,t),this)}showHelpAfterError(t=!0){return"string"!=typeof t&&(t=!!t),this._showHelpAfterError=t,this}showSuggestionAfterError(t=!0){return this._showSuggestionAfterError=!!t,this}addCommand(t,e){if(!t._name)throw new Error("Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()");return(e=e||{}).isDefault&&(this._defaultCommandName=t._name),(e.noHelp||e.hidden)&&(t._hidden=!0),this.commands.push(t),t.parent=this,this}createArgument(t,e){return new x(t,e)}argument(t,e,n,r){const i=this.createArgument(t,e);return"function"==typeof n?i.default(r).argParser(n):i.default(n),this.addArgument(i),this}arguments(t){return t.trim().split(/ +/).forEach(t=>{this.argument(t)}),this}addArgument(t){const e=this.registeredArguments.slice(-1)[0];if(e&&e.variadic)throw new Error(`only the last argument can be variadic '${e.name()}'`);if(t.required&&void 0!==t.defaultValue&&void 0===t.parseArg)throw new Error(`a default value for a required argument is never used: '${t.name()}'`);return this.registeredArguments.push(t),this}addHelpCommand(t,e){return!1===t?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,"string"==typeof t&&(this._helpCommandName=t.split(" ")[0],this._helpCommandnameAndArgs=t),this._helpCommandDescription=e||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return void 0===this._addImplicitHelpCommand?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(t,e){const n=["preSubcommand","preAction","postAction"];if(!n.includes(t))throw new Error(`Unexpected value for event passed to hook : '${t}'.\nExpecting one of '${n.join("', '")}'`);return this._lifeCycleHooks[t]?this._lifeCycleHooks[t].push(e):this._lifeCycleHooks[t]=[e],this}exitOverride(t){return this._exitCallback=t||(t=>{if("commander.executeSubCommandAsync"!==t.code)throw t}),this}_exit(t,e,n){this._exitCallback&&this._exitCallback(new $(t,e,n)),A.exit(t)}action(t){return this._actionHandler=e=>{const n=this.registeredArguments.length,r=e.slice(0,n);return this._storeOptionsAsProperties?r[n]=this:r[n]=this.opts(),r.push(this),t.apply(this,r)},this}createOption(t,e){return new N(t,e)}_callParseArg(t,e,n,r){try{return t.parseArg(e,n)}catch(t){if("commander.invalidArgument"===t.code){const e=`${r} ${t.message}`;this.error(e,{exitCode:t.exitCode,code:t.code})}throw t}}addOption(t){const e=t.name(),n=t.attributeName();if(t.negate){const e=t.long.replace(/^--no-/,"--");this._findOption(e)||this.setOptionValueWithSource(n,void 0===t.defaultValue||t.defaultValue,"default")}else void 0!==t.defaultValue&&this.setOptionValueWithSource(n,t.defaultValue,"default");this.options.push(t);const handleOptionValue=(e,r,i)=>{null==e&&void 0!==t.presetArg&&(e=t.presetArg);const o=this.getOptionValue(n);null!==e&&t.parseArg?e=this._callParseArg(t,e,o,r):null!==e&&t.variadic&&(e=t._concatValue(e,o)),null==e&&(e=!t.negate&&(!(!t.isBoolean()&&!t.optional)||"")),this.setOptionValueWithSource(n,e,i)};return this.on("option:"+e,e=>{const n=`error: option '${t.flags}' argument '${e}' is invalid.`;handleOptionValue(e,n,"cli")}),t.envVar&&this.on("optionEnv:"+e,e=>{const n=`error: option '${t.flags}' value '${e}' from env '${t.envVar}' is invalid.`;handleOptionValue(e,n,"env")}),this}_optionEx(t,e,n,r,i){if("object"==typeof e&&e instanceof N)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");const o=this.createOption(e,n);if(o.makeOptionMandatory(!!t.mandatory),"function"==typeof r)o.default(i).argParser(r);else if(r instanceof RegExp){const t=r;r=(e,n)=>{const r=t.exec(e);return r?r[0]:n},o.default(i).argParser(r)}else o.default(r);return this.addOption(o)}option(t,e,n,r){return this._optionEx({},t,e,n,r)}requiredOption(t,e,n,r){return this._optionEx({mandatory:!0},t,e,n,r)}combineFlagAndOptionalValue(t=!0){return this._combineFlagAndOptionalValue=!!t,this}allowUnknownOption(t=!0){return this._allowUnknownOption=!!t,this}allowExcessArguments(t=!0){return this._allowExcessArguments=!!t,this}enablePositionalOptions(t=!0){return this._enablePositionalOptions=!!t,this}passThroughOptions(t=!0){if(this._passThroughOptions=!!t,this.parent&&t&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(t=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this._storeOptionsAsProperties=!!t,this}getOptionValue(t){return this._storeOptionsAsProperties?this[t]:this._optionValues[t]}setOptionValue(t,e){return this.setOptionValueWithSource(t,e,void 0)}setOptionValueWithSource(t,e,n){return this._storeOptionsAsProperties?this[t]=e:this._optionValues[t]=e,this._optionValueSources[t]=n,this}getOptionValueSource(t){return this._optionValueSources[t]}getOptionValueSourceWithGlobals(t){let e;return this._getCommandAndAncestors().forEach(n=>{void 0!==n.getOptionValueSource(t)&&(e=n.getOptionValueSource(t))}),e}_prepareUserArgs(t,e){if(void 0!==t&&!Array.isArray(t))throw new Error("first parameter to parse must be array or undefined");let n;switch(e=e||{},void 0===t&&(t=A.argv,A.versions&&A.versions.electron&&(e.from="electron")),this.rawArgs=t.slice(),e.from){case void 0:case"node":this._scriptPath=t[1],n=t.slice(2);break;case"electron":A.defaultApp?(this._scriptPath=t[1],n=t.slice(2)):n=t.slice(1);break;case"user":n=t.slice(0);break;default:throw new Error(`unexpected parse option { from: '${e.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",n}parse(t,e){const n=this._prepareUserArgs(t,e);return this._parseCommand([],n),this}async parseAsync(t,e){const n=this._prepareUserArgs(t,e);return await this._parseCommand([],n),this}_executeSubCommand(t,e){e=e.slice();let n=!1;const r=[".js",".ts",".tsx",".mjs",".cjs"];function findFile(t,e){const n=E.resolve(t,e);if(k.existsSync(n))return n;if(r.includes(E.extname(e)))return;const i=r.find(t=>k.existsSync(`${n}${t}`));return i?`${n}${i}`:void 0}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let i,o=t._executableFile||`${this._name}-${t._name}`,s=this._executableDir||"";if(this._scriptPath){let t;try{t=k.realpathSync(this._scriptPath)}catch(e){t=this._scriptPath}s=E.resolve(E.dirname(t),s)}if(s){let e=findFile(s,o);if(!e&&!t._executableFile&&this._scriptPath){const n=E.basename(this._scriptPath,E.extname(this._scriptPath));n!==this._name&&(e=findFile(s,`${n}-${t._name}`))}o=e||o}if(n=r.includes(E.extname(o)),"win32"!==A.platform?n?(e.unshift(o),e=incrementNodeInspectorPort(A.execArgv).concat(e),i=C.spawn(A.argv[0],e,{stdio:"inherit"})):i=C.spawn(o,e,{stdio:"inherit"}):(e.unshift(o),e=incrementNodeInspectorPort(A.execArgv).concat(e),i=C.spawn(A.execPath,e,{stdio:"inherit"})),!i.killed){["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(t=>{A.on(t,()=>{!1===i.killed&&null===i.exitCode&&i.kill(t)})})}const a=this._exitCallback;a?i.on("close",()=>{a(new $(A.exitCode||0,"commander.executeSubCommandAsync","(close)"))}):i.on("close",A.exit.bind(A)),i.on("error",e=>{if("ENOENT"===e.code){const e=s?`searched for local subcommand relative to directory '${s}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",n=`'${o}' does not exist\n - if '${t._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${e}`;throw new Error(n)}if("EACCES"===e.code)throw new Error(`'${o}' not executable`);if(a){const t=new $(1,"commander.executeSubCommandAsync","(error)");t.nestedError=e,a(t)}else A.exit(1)}),this.runningCommand=i}_dispatchSubcommand(t,e,n){const r=this._findCommand(t);let i;return r||this.help({error:!0}),i=this._chainOrCallSubCommandHook(i,r,"preSubcommand"),i=this._chainOrCall(i,()=>{if(!r._executableHandler)return r._parseCommand(e,n);this._executeSubCommand(r,e.concat(n))}),i}_dispatchHelpCommand(t){t||this.help();const e=this._findCommand(t);return e&&!e._executableHandler&&e.help(),this._dispatchSubcommand(t,[],[this._helpLongFlag||this._helpShortFlag])}_checkNumberOfArguments(){this.registeredArguments.forEach((t,e)=>{t.required&&null==this.args[e]&&this.missingArgument(t.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic||this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){const myParseArg=(t,e,n)=>{let r=e;if(null!==e&&t.parseArg){const i=`error: command-argument value '${e}' is invalid for argument '${t.name()}'.`;r=this._callParseArg(t,e,n,i)}return r};this._checkNumberOfArguments();const t=[];this.registeredArguments.forEach((e,n)=>{let r=e.defaultValue;e.variadic?n<this.args.length?(r=this.args.slice(n),e.parseArg&&(r=r.reduce((t,n)=>myParseArg(e,n,t),e.defaultValue))):void 0===r&&(r=[]):n<this.args.length&&(r=this.args[n],e.parseArg&&(r=myParseArg(e,r,e.defaultValue))),t[n]=r}),this.processedArgs=t}_chainOrCall(t,e){return t&&t.then&&"function"==typeof t.then?t.then(()=>e()):e()}_chainOrCallHooks(t,e){let n=t;const r=[];return this._getCommandAndAncestors().reverse().filter(t=>void 0!==t._lifeCycleHooks[e]).forEach(t=>{t._lifeCycleHooks[e].forEach(e=>{r.push({hookedCommand:t,callback:e})})}),"postAction"===e&&r.reverse(),r.forEach(t=>{n=this._chainOrCall(n,()=>t.callback(t.hookedCommand,this))}),n}_chainOrCallSubCommandHook(t,e,n){let r=t;return void 0!==this._lifeCycleHooks[n]&&this._lifeCycleHooks[n].forEach(t=>{r=this._chainOrCall(r,()=>t(this,e))}),r}_parseCommand(t,e){const n=this.parseOptions(e);if(this._parseOptionsEnv(),this._parseOptionsImplied(),t=t.concat(n.operands),e=n.unknown,this.args=t.concat(e),t&&this._findCommand(t[0]))return this._dispatchSubcommand(t[0],t.slice(1),e);if(this._hasImplicitHelpCommand()&&t[0]===this._helpCommandName)return this._dispatchHelpCommand(t[1]);if(this._defaultCommandName)return outputHelpIfRequested(this,e),this._dispatchSubcommand(this._defaultCommandName,t,e);!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),outputHelpIfRequested(this,n.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();const checkForUnknownOptions=()=>{n.unknown.length>0&&this.unknownOption(n.unknown[0])},r=`command:${this.name()}`;if(this._actionHandler){let n;return checkForUnknownOptions(),this._processArguments(),n=this._chainOrCallHooks(n,"preAction"),n=this._chainOrCall(n,()=>this._actionHandler(this.processedArgs)),this.parent&&(n=this._chainOrCall(n,()=>{this.parent.emit(r,t,e)})),n=this._chainOrCallHooks(n,"postAction"),n}if(this.parent&&this.parent.listenerCount(r))checkForUnknownOptions(),this._processArguments(),this.parent.emit(r,t,e);else if(t.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",t,e);this.listenerCount("command:*")?this.emit("command:*",t,e):this.commands.length?this.unknownCommand():(checkForUnknownOptions(),this._processArguments())}else this.commands.length?(checkForUnknownOptions(),this.help({error:!0})):(checkForUnknownOptions(),this._processArguments())}_findCommand(t){if(t)return this.commands.find(e=>e._name===t||e._aliases.includes(t))}_findOption(t){return this.options.find(e=>e.is(t))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach(t=>{t.options.forEach(e=>{e.mandatory&&void 0===t.getOptionValue(e.attributeName())&&t.missingMandatoryOptionValue(e)})})}_checkForConflictingLocalOptions(){const t=this.options.filter(t=>{const e=t.attributeName();return void 0!==this.getOptionValue(e)&&"default"!==this.getOptionValueSource(e)}),e=t.filter(t=>t.conflictsWith.length>0);e.forEach(e=>{const n=t.find(t=>e.conflictsWith.includes(t.attributeName()));n&&this._conflictingOption(e,n)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach(t=>{t._checkForConflictingLocalOptions()})}parseOptions(t){const e=[],n=[];let r=e;const i=t.slice();function maybeOption(t){return t.length>1&&"-"===t[0]}let o=null;for(;i.length;){const t=i.shift();if("--"===t){r===n&&r.push(t),r.push(...i);break}if(!o||maybeOption(t)){if(o=null,maybeOption(t)){const e=this._findOption(t);if(e){if(e.required){const t=i.shift();void 0===t&&this.optionMissingArgument(e),this.emit(`option:${e.name()}`,t)}else if(e.optional){let t=null;i.length>0&&!maybeOption(i[0])&&(t=i.shift()),this.emit(`option:${e.name()}`,t)}else this.emit(`option:${e.name()}`);o=e.variadic?e:null;continue}}if(t.length>2&&"-"===t[0]&&"-"!==t[1]){const e=this._findOption(`-${t[1]}`);if(e){e.required||e.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${e.name()}`,t.slice(2)):(this.emit(`option:${e.name()}`),i.unshift(`-${t.slice(2)}`));continue}}if(/^--[^=]+=/.test(t)){const e=t.indexOf("="),n=this._findOption(t.slice(0,e));if(n&&(n.required||n.optional)){this.emit(`option:${n.name()}`,t.slice(e+1));continue}}if(maybeOption(t)&&(r=n),(this._enablePositionalOptions||this._passThroughOptions)&&0===e.length&&0===n.length){if(this._findCommand(t)){e.push(t),i.length>0&&n.push(...i);break}if(t===this._helpCommandName&&this._hasImplicitHelpCommand()){e.push(t),i.length>0&&e.push(...i);break}if(this._defaultCommandName){n.push(t),i.length>0&&n.push(...i);break}}if(this._passThroughOptions){r.push(t),i.length>0&&r.push(...i);break}r.push(t)}else this.emit(`option:${o.name()}`,t)}return{operands:e,unknown:n}}opts(){if(this._storeOptionsAsProperties){const t={},e=this.options.length;for(let n=0;n<e;n++){const e=this.options[n].attributeName();t[e]=e===this._versionOptionName?this._version:this[e]}return t}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((t,e)=>Object.assign(t,e.opts()),{})}error(t,e){this._outputConfiguration.outputError(`${t}\n`,this._outputConfiguration.writeErr),"string"==typeof this._showHelpAfterError?this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`):this._showHelpAfterError&&(this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0}));const n=e||{},r=n.exitCode||1,i=n.code||"commander.error";this._exit(r,i,t)}_parseOptionsEnv(){this.options.forEach(t=>{if(t.envVar&&t.envVar in A.env){const e=t.attributeName();(void 0===this.getOptionValue(e)||["default","config","env"].includes(this.getOptionValueSource(e)))&&(t.required||t.optional?this.emit(`optionEnv:${t.name()}`,A.env[t.envVar]):this.emit(`optionEnv:${t.name()}`))}})}_parseOptionsImplied(){const t=new D(this.options),hasCustomOptionValue=t=>void 0!==this.getOptionValue(t)&&!["default","implied"].includes(this.getOptionValueSource(t));this.options.filter(e=>void 0!==e.implied&&hasCustomOptionValue(e.attributeName())&&t.valueFromOption(this.getOptionValue(e.attributeName()),e)).forEach(t=>{Object.keys(t.implied).filter(t=>!hasCustomOptionValue(t)).forEach(e=>{this.setOptionValueWithSource(e,t.implied[e],"implied")})})}missingArgument(t){const e=`error: missing required argument '${t}'`;this.error(e,{code:"commander.missingArgument"})}optionMissingArgument(t){const e=`error: option '${t.flags}' argument missing`;this.error(e,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(t){const e=`error: required option '${t.flags}' not specified`;this.error(e,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(t,e){const findBestOptionFromValue=t=>{const e=t.attributeName(),n=this.getOptionValue(e),r=this.options.find(t=>t.negate&&e===t.attributeName()),i=this.options.find(t=>!t.negate&&e===t.attributeName());return r&&(void 0===r.presetArg&&!1===n||void 0!==r.presetArg&&n===r.presetArg)?r:i||t},getErrorMessage=t=>{const e=findBestOptionFromValue(t),n=e.attributeName();return"env"===this.getOptionValueSource(n)?`environment variable '${e.envVar}'`:`option '${e.flags}'`},n=`error: ${getErrorMessage(t)} cannot be used with ${getErrorMessage(e)}`;this.error(n,{code:"commander.conflictingOption"})}unknownOption(t){if(this._allowUnknownOption)return;let e="";if(t.startsWith("--")&&this._showSuggestionAfterError){let n=[],r=this;do{const t=r.createHelp().visibleOptions(r).filter(t=>t.long).map(t=>t.long);n=n.concat(t),r=r.parent}while(r&&!r._enablePositionalOptions);e=M(t,n)}const n=`error: unknown option '${t}'${e}`;this.error(n,{code:"commander.unknownOption"})}_excessArguments(t){if(this._allowExcessArguments)return;const e=this.registeredArguments.length,n=1===e?"":"s",r=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${e} argument${n} but got ${t.length}.`;this.error(r,{code:"commander.excessArguments"})}unknownCommand(){const t=this.args[0];let e="";if(this._showSuggestionAfterError){const n=[];this.createHelp().visibleCommands(this).forEach(t=>{n.push(t.name()),t.alias()&&n.push(t.alias())}),e=M(t,n)}const n=`error: unknown command '${t}'${e}`;this.error(n,{code:"commander.unknownCommand"})}version(t,e,n){if(void 0===t)return this._version;this._version=t,e=e||"-V, --version",n=n||"output the version number";const r=this.createOption(e,n);return this._versionOptionName=r.attributeName(),this.options.push(r),this.on("option:"+r.name(),()=>{this._outputConfiguration.writeOut(`${t}\n`),this._exit(0,"commander.version",t)}),this}description(t,e){return void 0===t&&void 0===e?this._description:(this._description=t,e&&(this._argsDescription=e),this)}summary(t){return void 0===t?this._summary:(this._summary=t,this)}alias(t){if(void 0===t)return this._aliases[0];let e=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(e=this.commands[this.commands.length-1]),t===e._name)throw new Error("Command alias can't be the same as its name");return e._aliases.push(t),this}aliases(t){return void 0===t?this._aliases:(t.forEach(t=>this.alias(t)),this)}usage(t){if(void 0===t){if(this._usage)return this._usage;const t=this.registeredArguments.map(t=>F(t));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?t:[]).join(" ")}return this._usage=t,this}name(t){return void 0===t?this._name:(this._name=t,this)}nameFromFilename(t){return this._name=E.basename(t,E.extname(t)),this}executableDir(t){return void 0===t?this._executableDir:(this._executableDir=t,this)}helpInformation(t){const e=this.createHelp();return void 0===e.helpWidth&&(e.helpWidth=t&&t.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),e.formatHelp(this,e)}_getHelpContext(t){const e={error:!!(t=t||{}).error};let n;return n=e.error?t=>this._outputConfiguration.writeErr(t):t=>this._outputConfiguration.writeOut(t),e.write=t.write||n,e.command=this,e}outputHelp(t){let e;"function"==typeof t&&(e=t,t=void 0);const n=this._getHelpContext(t);this._getCommandAndAncestors().reverse().forEach(t=>t.emit("beforeAllHelp",n)),this.emit("beforeHelp",n);let r=this.helpInformation(n);if(e&&(r=e(r),"string"!=typeof r&&!Buffer.isBuffer(r)))throw new Error("outputHelp callback must return a string or a Buffer");n.write(r),this._helpLongFlag&&this.emit(this._helpLongFlag),this.emit("afterHelp",n),this._getCommandAndAncestors().forEach(t=>t.emit("afterAllHelp",n))}helpOption(t,e){if("boolean"==typeof t)return this._hasHelpOption=t,this;this._helpFlags=t||this._helpFlags,this._helpDescription=e||this._helpDescription;const n=I(this._helpFlags);return this._helpShortFlag=n.shortFlag,this._helpLongFlag=n.longFlag,this}help(t){this.outputHelp(t);let e=A.exitCode||0;0===e&&t&&"function"!=typeof t&&t.error&&(e=1),this._exit(e,"commander.help","(outputHelp)")}addHelpText(t,e){const n=["beforeAll","before","after","afterAll"];if(!n.includes(t))throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${n.join("', '")}'`);const r=`${t}Help`;return this.on(r,t=>{let n;n="function"==typeof e?e({error:t.error,command:t.command}):e,n&&t.write(`${n}\n`)}),this}},function(t,e){const{Argument:n}=d,{Command:r}=y,{CommanderError:i,InvalidArgumentError:o}=f,{Help:s}=w,{Option:a}=v;(e=t.exports=new r).program=e,e.Command=r,e.Option=a,e.Argument=n,e.Help=s,e.CommanderError=i,e.InvalidArgumentError=o,e.InvalidOptionArgumentError=o}(p,p.exports);var j,T,R,H,L,V,W,q,U=p.exports,B={exports:{}};function requireConversions(){if(H)return R;H=1;const t=T?j:(T=1,j={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),e={};for(const n of Object.keys(t))e[t[n]]=n;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};R=n;for(const t of Object.keys(n)){if(!("channels"in n[t]))throw new Error("missing channels property: "+t);if(!("labels"in n[t]))throw new Error("missing channel labels property: "+t);if(n[t].labels.length!==n[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:r}=n[t];delete n[t].channels,delete n[t].labels,Object.defineProperty(n[t],"channels",{value:e}),Object.defineProperty(n[t],"labels",{value:r})}function comparativeDistance(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}return n.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=o-i;let a,c;o===i?a=0:e===o?a=(n-r)/s:n===o?a=2+(r-e)/s:r===o&&(a=4+(e-n)/s),a=Math.min(60*a,360),a<0&&(a+=360);const l=(i+o)/2;return c=o===i?0:l<=.5?s/(o+i):s/(2-o-i),[a,100*c,100*l]},n.rgb.hsv=function(t){let e,n,r,i,o;const s=t[0]/255,a=t[1]/255,c=t[2]/255,l=Math.max(s,a,c),u=l-Math.min(s,a,c),diffc=function(t){return(l-t)/6/u+.5};return 0===u?(i=0,o=0):(o=u/l,e=diffc(s),n=diffc(a),r=diffc(c),s===l?i=r-n:a===l?i=1/3+e-r:c===l&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*l]},n.rgb.hwb=function(t){const e=t[0],r=t[1];let i=t[2];const o=n.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,i));return i=1-1/255*Math.max(e,Math.max(r,i)),[o,100*s,100*i]},n.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(1-e,1-n,1-r);return[100*((1-e-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*i]},n.rgb.keyword=function(n){const r=e[n];if(r)return r;let i,o=1/0;for(const e of Object.keys(t)){const r=comparativeDistance(n,t[e]);r<o&&(o=r,i=e)}return i},n.keyword.rgb=function(e){return t[e]},n.rgb.xyz=function(t){let e=t[0]/255,n=t[1]/255,r=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;return[100*(.4124*e+.3576*n+.1805*r),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},n.rgb.lab=function(t){const e=n.rgb.xyz(t);let r=e[0],i=e[1],o=e[2];r/=95.047,i/=100,o/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;return[116*i-16,500*(r-i),200*(i-o)]},n.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let i,o,s;if(0===n)return s=255*r,[s,s,s];i=r<.5?r*(1+n):r+n-r*n;const a=2*r-i,c=[0,0,0];for(let t=0;t<3;t++)o=e+1/3*-(t-1),o<0&&o++,o>1&&o--,s=6*o<1?a+6*(i-a)*o:2*o<1?i:3*o<2?a+(i-a)*(2/3-o)*6:a,c[t]=255*s;return c},n.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,i=n;const o=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o;return[e,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},n.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const i=Math.floor(e)%6,o=e-Math.floor(e),s=255*r*(1-n),a=255*r*(1-n*o),c=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,c,s];case 1:return[a,r,s];case 2:return[s,r,c];case 3:return[s,a,r];case 4:return[c,s,r];case 5:return[r,s,a]}},n.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,i=Math.max(r,.01);let o,s;s=(2-n)*r;const a=(2-n)*i;return o=n*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,100*o,100*s]},n.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const i=n+r;let o;i>1&&(n/=i,r/=i);const s=Math.floor(6*e),a=1-r;o=6*e-s,1&s&&(o=1-o);const c=n+o*(a-n);let l,u,h;switch(s){default:case 6:case 0:l=a,u=c,h=n;break;case 1:l=c,u=a,h=n;break;case 2:l=n,u=a,h=c;break;case 3:l=n,u=c,h=a;break;case 4:l=c,u=n,h=a;break;case 5:l=a,u=n,h=c}return[255*l,255*u,255*h]},n.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},n.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let i,o,s;return i=3.2406*e+-1.5372*n+-.4986*r,o=-.9689*e+1.8758*n+.0415*r,s=.0557*e+-.204*n+1.057*r,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[255*i,255*o,255*s]},n.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*n-16,500*(e-n),200*(n-r)]},n.lab.xyz=function(t){let e,n,r;n=(t[0]+16)/116,e=t[1]/500+n,r=n-t[2]/200;const i=n**3,o=e**3,s=r**3;return n=i>.008856?i:(n-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,e*=95.047,n*=100,r*=108.883,[e,n,r]},n.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let i;i=360*Math.atan2(r,n)/2/Math.PI,i<0&&(i+=360);return[e,Math.sqrt(n*n+r*r),i]},n.lch.lab=function(t){const e=t[0],n=t[1],r=t[2]/360*2*Math.PI;return[e,n*Math.cos(r),n*Math.sin(r)]},n.rgb.ansi16=function(t,e=null){const[r,i,o]=t;let s=null===e?n.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),0===s)return 30;let a=30+(Math.round(o/255)<<2|Math.round(i/255)<<1|Math.round(r/255));return 2===s&&(a+=60),a},n.hsv.ansi16=function(t){return n.rgb.ansi16(n.hsv.rgb(t),t[2])},n.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];if(e===n&&n===r)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;return 16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},n.ansi16.rgb=function(t){let e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},n.ansi256.rgb=function(t){if(t>=232){const e=10*(t-232)+8;return[e,e,e]}let e;t-=16;return[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255]},n.rgb.hex=function(t){const e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},n.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let n=e[0];3===e[0].length&&(n=n.split("").map(t=>t+t).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},n.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.max(Math.max(e,n),r),o=Math.min(Math.min(e,n),r),s=i-o;let a,c;return a=s<1?o/(1-s):0,c=s<=0?0:i===e?(n-r)/s%6:i===n?2+(r-e)/s:4+(e-n)/s,c/=6,c%=1,[360*c,100*s,100*a]},n.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},n.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},n.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];const i=[0,0,0],o=e%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return c=(1-n)*r,[255*(n*i[0]+c),255*(n*i[1]+c),255*(n*i[2]+c)]},n.hcg.hsv=function(t){const e=t[1]/100,n=e+t[2]/100*(1-e);let r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},n.hcg.hsl=function(t){const e=t[1]/100,n=t[2]/100*(1-e)+.5*e;let r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},n.hcg.hwb=function(t){const e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},n.hwb.hcg=function(t){const e=t[1]/100,n=1-t[2]/100,r=n-e;let i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},n.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},n.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},n.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},n.gray.hsl=function(t){return[0,0,t[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(t){return[0,100,t[0]]},n.gray.cmyk=function(t){return[0,0,0,t[0]]},n.gray.lab=function(t){return[t[0],0,0]},n.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},n.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]},R}function requireRoute(){if(V)return L;V=1;const t=requireConversions();function deriveBFS(e){const n=function(){const e={},n=Object.keys(t);for(let t=n.length,r=0;r<t;r++)e[n[r]]={distance:-1,parent:null};return e}(),r=[e];for(n[e].distance=0;r.length;){const e=r.pop(),i=Object.keys(t[e]);for(let t=i.length,o=0;o<t;o++){const t=i[o],s=n[t];-1===s.distance&&(s.distance=n[e].distance+1,s.parent=e,r.unshift(t))}}return n}function link(t,e){return function(n){return e(t(n))}}function wrapConversion(e,n){const r=[n[e].parent,e];let i=t[n[e].parent][e],o=n[e].parent;for(;n[o].parent;)r.unshift(n[o].parent),i=link(t[n[o].parent][o],i),o=n[o].parent;return i.conversion=r,i}return L=function(t){const e=deriveBFS(t),n={},r=Object.keys(e);for(let t=r.length,i=0;i<t;i++){const t=r[i];null!==e[t].parent&&(n[t]=wrapConversion(t,e))}return n}}function requireColorConvert(){if(q)return W;q=1;const t=requireConversions(),e=requireRoute(),n={};return Object.keys(t).forEach(r=>{n[r]={},Object.defineProperty(n[r],"channels",{value:t[r].channels}),Object.defineProperty(n[r],"labels",{value:t[r].labels});const i=e(r);Object.keys(i).forEach(t=>{const e=i[t];n[r][t]=function(t){const wrappedFn=function(...e){const n=e[0];if(null==n)return n;n.length>1&&(e=n);const r=t(e);if("object"==typeof r)for(let t=r.length,e=0;e<t;e++)r[e]=Math.round(r[e]);return r};return"conversion"in t&&(wrappedFn.conversion=t.conversion),wrappedFn}(e),n[r][t].raw=function(t){const wrappedFn=function(...e){const n=e[0];return null==n?n:(n.length>1&&(e=n),t(e))};return"conversion"in t&&(wrappedFn.conversion=t.conversion),wrappedFn}(e)})}),W=n}!function(t){const wrapAnsi16=(t,e)=>(...n)=>`[${t(...n)+e}m`,wrapAnsi256=(t,e)=>(...n)=>{const r=t(...n);return`[${38+e};5;${r}m`},wrapAnsi16m=(t,e)=>(...n)=>{const r=t(...n);return`[${38+e};2;${r[0]};${r[1]};${r[2]}m`},ansi2ansi=t=>t,rgb2rgb=(t,e,n)=>[t,e,n],setLazyProperty=(t,e,n)=>{Object.defineProperty(t,e,{get:()=>{const r=n();return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0}),r},enumerable:!0,configurable:!0})};let e;const makeDynamicStyles=(t,n,r,i)=>{void 0===e&&(e=requireColorConvert());const o=i?10:0,s={};for(const[i,a]of Object.entries(e)){const e="ansi16"===i?"ansi":i;i===n?s[e]=t(r,o):"object"==typeof a&&(s[e]=t(a[n],o))}return s};Object.defineProperty(t,"exports",{enumerable:!0,get:function(){const t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(const[n,r]of Object.entries(e)){for(const[n,i]of Object.entries(r))e[n]={open:`[${i[0]}m`,close:`[${i[1]}m`},r[n]=e[n],t.set(i[0],i[1]);Object.defineProperty(e,n,{value:r,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="[39m",e.bgColor.close="[49m",setLazyProperty(e.color,"ansi",()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,!1)),setLazyProperty(e.color,"ansi256",()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,!1)),setLazyProperty(e.color,"ansi16m",()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,!1)),setLazyProperty(e.bgColor,"ansi",()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,!0)),setLazyProperty(e.bgColor,"ansi256",()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,!0)),setLazyProperty(e.bgColor,"ansi16m",()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,!0)),e}})}(B);var G=B.exports;const J=o,Y=s,hasFlag=(t,e=process.argv)=>{const n=t.startsWith("-")?"":1===t.length?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return-1!==r&&(-1===i||r<i)},{env:K}=process;let z;function translateLevel(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function supportsColor(t,e){if(0===z)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(!e&&void 0===z)return 0;const n=z||0;if("dumb"===K.TERM)return n;if("win32"===process.platform){const t=J.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in K)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(t=>t in K)||"codeship"===K.CI_NAME?1:n;if("TEAMCITY_VERSION"in K)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(K.TEAMCITY_VERSION)?1:0;if("truecolor"===K.COLORTERM)return 3;if("TERM_PROGRAM"in K){const t=parseInt((K.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(K.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(K.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(K.TERM)||"COLORTERM"in K?1:n}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")||hasFlag("color=never")?z=0:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(z=1),"FORCE_COLOR"in K&&(z="true"===K.FORCE_COLOR?1:"false"===K.FORCE_COLOR?0:0===K.FORCE_COLOR.length?1:Math.min(parseInt(K.FORCE_COLOR,10),3));var Q={stdout:translateLevel(supportsColor(0,Y.isatty(1))),stderr:translateLevel(supportsColor(0,Y.isatty(2)))};var X,Z,tt={stringReplaceAll:(t,e,n)=>{let r=t.indexOf(e);if(-1===r)return t;const i=e.length;let o=0,s="";do{s+=t.substr(o,r-o)+e+n,o=r+i,r=t.indexOf(e,o)}while(-1!==r);return s+=t.substr(o),s},stringEncaseCRLFWithFirstIndex:(t,e,n,r)=>{let i=0,o="";do{const s="\r"===t[r-1];o+=t.substr(i,(s?r-1:r)-i)+e+(s?"\r\n":"\n")+n,i=r+1,r=t.indexOf("\n",i)}while(-1!==r);return o+=t.substr(i),o}};const et=G,{stdout:nt,stderr:rt}=Q,{stringReplaceAll:it,stringEncaseCRLFWithFirstIndex:ot}=tt,{isArray:st}=Array,at=["ansi","ansi","ansi256","ansi16m"],ct=Object.create(null);class lt{constructor(t){return chalkFactory(t)}}const chalkFactory=t=>{const e={};return((t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=nt?nt.level:0;t.level=void 0===e.level?n:e.level})(e,t),e.template=(...t)=>chalkTag(e.template,...t),Object.setPrototypeOf(e,Chalk.prototype),Object.setPrototypeOf(e.template,e),e.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},e.template.Instance=lt,e.template};function Chalk(t){return chalkFactory(t)}for(const[t,e]of Object.entries(et))ct[t]={get(){const n=createBuilder(this,createStyler(e.open,e.close,this._styler),this._isEmpty);return Object.defineProperty(this,t,{value:n}),n}};ct.visible={get(){const t=createBuilder(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:t}),t}};const ut=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const t of ut)ct[t]={get(){const{level:e}=this;return function(...n){const r=createStyler(et.color[at[e]][t](...n),et.color.close,this._styler);return createBuilder(this,r,this._isEmpty)}}};for(const t of ut){ct["bg"+t[0].toUpperCase()+t.slice(1)]={get(){const{level:e}=this;return function(...n){const r=createStyler(et.bgColor[at[e]][t](...n),et.bgColor.close,this._styler);return createBuilder(this,r,this._isEmpty)}}}}const ht=Object.defineProperties(()=>{},{...ct,level:{enumerable:!0,get(){return this._generator.level},set(t){this._generator.level=t}}}),createStyler=(t,e,n)=>{let r,i;return void 0===n?(r=t,i=e):(r=n.openAll+t,i=e+n.closeAll),{open:t,close:e,openAll:r,closeAll:i,parent:n}},createBuilder=(t,e,n)=>{const builder=(...t)=>st(t[0])&&st(t[0].raw)?applyStyle(builder,chalkTag(builder,...t)):applyStyle(builder,1===t.length?""+t[0]:t.join(" "));return Object.setPrototypeOf(builder,ht),builder._generator=t,builder._styler=e,builder._isEmpty=n,builder},applyStyle=(t,e)=>{if(t.level<=0||!e)return t._isEmpty?"":e;let n=t._styler;if(void 0===n)return e;const{openAll:r,closeAll:i}=n;if(-1!==e.indexOf(""))for(;void 0!==n;)e=it(e,n.close,n.open),n=n.parent;const o=e.indexOf("\n");return-1!==o&&(e=ot(e,i,r,o)),r+e+i};let pt;const chalkTag=(t,...e)=>{const[n]=e;if(!st(n)||!st(n.raw))return e.join(" ");const r=e.slice(1),i=[n.raw[0]];for(let t=1;t<n.length;t++)i.push(String(r[t-1]).replace(/[{}\\]/g,"\\$&"),String(n.raw[t]));return void 0===pt&&(pt=function(){if(Z)return X;Z=1;const t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,e=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,r=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,i=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function unescape(t){const e="u"===t[0],n="{"===t[1];return e&&!n&&5===t.length||"x"===t[0]&&3===t.length?String.fromCharCode(parseInt(t.slice(1),16)):e&&n?String.fromCodePoint(parseInt(t.slice(2,-1),16)):i.get(t)||t}function parseArguments(t,e){const i=[],o=e.trim().split(/\s*,\s*/g);let s;for(const e of o){const o=Number(e);if(Number.isNaN(o)){if(!(s=e.match(n)))throw new Error(`Invalid Chalk template style argument: ${e} (in style '${t}')`);i.push(s[2].replace(r,(t,e,n)=>e?unescape(e):n))}else i.push(o)}return i}function parseStyle(t){e.lastIndex=0;const n=[];let r;for(;null!==(r=e.exec(t));){const t=r[1];if(r[2]){const e=parseArguments(t,r[2]);n.push([t].concat(e))}else n.push([t])}return n}function buildStyle(t,e){const n={};for(const t of e)for(const e of t.styles)n[e[0]]=t.inverse?null:e.slice(1);let r=t;for(const[t,e]of Object.entries(n))if(Array.isArray(e)){if(!(t in r))throw new Error(`Unknown Chalk style: ${t}`);r=e.length>0?r[t](...e):r[t]}return r}return X=(e,n)=>{const r=[],i=[];let o=[];if(n.replace(t,(t,n,s,a,c,l)=>{if(n)o.push(unescape(n));else if(a){const t=o.join("");o=[],i.push(0===r.length?t:buildStyle(e,r)(t)),r.push({inverse:s,styles:parseStyle(a)})}else if(c){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");i.push(buildStyle(e,r)(o.join(""))),o=[],r.pop()}else o.push(l)}),i.push(o.join("")),r.length>0){const t=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(t)}return i.join("")},X}()),pt(t,i.join(""))};Object.defineProperties(Chalk.prototype,ct);const dt=Chalk();dt.supportsColor=nt,dt.stderr=Chalk({level:rt?rt.level:0}),dt.stderr.supportsColor=rt;var ft=dt,mt={name:"@4xian/ccapi",version:"1.0.4",description:"Claude Code settings.json中key自动配置工具，方便API_KEY、AUTH_TOKEN、多模型快速切换"};const gt=ft,yt=mt;var version=function(){console.log(gt.blue(`${yt.name} v${yt.version}`)),console.log(yt.description)},wt={},bt={fromCallback:function(t){return Object.defineProperty(function(...e){if("function"!=typeof e[e.length-1])return new Promise((n,r)=>{e.push((t,e)=>null!=t?r(t):n(e)),t.apply(this,e)});t.apply(this,e)},"name",{value:t.name})},fromPromise:function(t){return Object.defineProperty(function(...e){const n=e[e.length-1];if("function"!=typeof n)return t.apply(this,e);e.pop(),t.apply(this,e).then(t=>n(null,t),n)},"name",{value:t.name})}},vt=a,_t=process.cwd,St=null,Ot=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return St||(St=_t.call(process)),St};try{process.cwd()}catch(t){}if("function"==typeof process.chdir){var Ct=process.chdir;process.chdir=function(t){St=null,Ct.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ct)}var polyfills$1=function(t){vt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(e,n,r){t.open(e,vt.O_WRONLY|vt.O_SYMLINK,n,function(e,i){e?r&&r(e):t.fchmod(i,n,function(e){t.close(i,function(t){r&&r(e||t)})})})},t.lchmodSync=function(e,n){var r,i=t.openSync(e,vt.O_WRONLY|vt.O_SYMLINK,n),o=!0;try{r=t.fchmodSync(i,n),o=!1}finally{if(o)try{t.closeSync(i)}catch(t){}else t.closeSync(i)}return r}}(t);t.lutimes||function(t){vt.hasOwnProperty("O_SYMLINK")&&t.futimes?(t.lutimes=function(e,n,r,i){t.open(e,vt.O_SYMLINK,function(e,o){e?i&&i(e):t.futimes(o,n,r,function(e){t.close(o,function(t){i&&i(e||t)})})})},t.lutimesSync=function(e,n,r){var i,o=t.openSync(e,vt.O_SYMLINK),s=!0;try{i=t.futimesSync(o,n,r),s=!1}finally{if(s)try{t.closeSync(o)}catch(t){}else t.closeSync(o)}return i}):t.futimes&&(t.lutimes=function(t,e,n,r){r&&process.nextTick(r)},t.lutimesSync=function(){})}(t);t.chown=chownFix(t.chown),t.fchown=chownFix(t.fchown),t.lchown=chownFix(t.lchown),t.chmod=chmodFix(t.chmod),t.fchmod=chmodFix(t.fchmod),t.lchmod=chmodFix(t.lchmod),t.chownSync=chownFixSync(t.chownSync),t.fchownSync=chownFixSync(t.fchownSync),t.lchownSync=chownFixSync(t.lchownSync),t.chmodSync=chmodFixSync(t.chmodSync),t.fchmodSync=chmodFixSync(t.fchmodSync),t.lchmodSync=chmodFixSync(t.lchmodSync),t.stat=statFix(t.stat),t.fstat=statFix(t.fstat),t.lstat=statFix(t.lstat),t.statSync=statFixSync(t.statSync),t.fstatSync=statFixSync(t.fstatSync),t.lstatSync=statFixSync(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(t,e,n){n&&process.nextTick(n)},t.lchmodSync=function(){});t.chown&&!t.lchown&&(t.lchown=function(t,e,n,r){r&&process.nextTick(r)},t.lchownSync=function(){});"win32"===Ot&&(t.rename="function"!=typeof t.rename?t.rename:function(e){function rename(n,r,i){var o=Date.now(),s=0;e(n,r,function CB(a){if(a&&("EACCES"===a.code||"EPERM"===a.code||"EBUSY"===a.code)&&Date.now()-o<6e4)return setTimeout(function(){t.stat(r,function(t,o){t&&"ENOENT"===t.code?e(n,r,CB):i(a)})},s),void(s<100&&(s+=10));i&&i(a)})}return Object.setPrototypeOf&&Object.setPrototypeOf(rename,e),rename}(t.rename));function chmodFix(e){return e?function(n,r,i){return e.call(t,n,r,function(t){chownErOk(t)&&(t=null),i&&i.apply(this,arguments)})}:e}function chmodFixSync(e){return e?function(n,r){try{return e.call(t,n,r)}catch(t){if(!chownErOk(t))throw t}}:e}function chownFix(e){return e?function(n,r,i,o){return e.call(t,n,r,i,function(t){chownErOk(t)&&(t=null),o&&o.apply(this,arguments)})}:e}function chownFixSync(e){return e?function(n,r,i){try{return e.call(t,n,r,i)}catch(t){if(!chownErOk(t))throw t}}:e}function statFix(e){return e?function(n,r,i){function callback(t,e){e&&(e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof r&&(i=r,r=null),r?e.call(t,n,r,callback):e.call(t,n,callback)}:e}function statFixSync(e){return e?function(n,r){var i=r?e.call(t,n,r):e.call(t,n);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:e}function chownErOk(t){return!t||("ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}t.read="function"!=typeof t.read?t.read:function(e){function read(n,r,i,o,s,a){var c;if(a&&"function"==typeof a){var l=0;c=function(u,h,p){if(u&&"EAGAIN"===u.code&&l<10)return l++,e.call(t,n,r,i,o,s,c);a.apply(this,arguments)}}return e.call(t,n,r,i,o,s,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(read,e),read}(t.read),t.readSync="function"!=typeof t.readSync?t.readSync:(e=t.readSync,function(n,r,i,o,s){for(var a=0;;)try{return e.call(t,n,r,i,o,s)}catch(t){if("EAGAIN"===t.code&&a<10){a++;continue}throw t}});var e};var Et=c.Stream,legacyStreams=function(t){return{ReadStream:function ReadStream(e,n){if(!(this instanceof ReadStream))return new ReadStream(e,n);Et.call(this);var r=this;this.path=e,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,n=n||{};for(var i=Object.keys(n),o=0,s=i.length;o<s;o++){var a=i[o];this[a]=n[a]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){r._read()});t.open(this.path,this.flags,this.mode,function(t,e){if(t)return r.emit("error",t),void(r.readable=!1);r.fd=e,r.emit("open",e),r._read()})},WriteStream:function WriteStream(e,n){if(!(this instanceof WriteStream))return new WriteStream(e,n);Et.call(this),this.path=e,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var r=Object.keys(n),i=0,o=r.length;i<o;i++){var s=r[i];this[s]=n[s]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var clone_1=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var e={__proto__:kt(t)};else e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e},kt=Object.getPrototypeOf||function(t){return t.__proto__};var At,xt,Ft=r,$t=polyfills$1,Pt=legacyStreams,Nt=clone_1,It=l;function publishQueue(t,e){Object.defineProperty(t,At,{get:function(){return e}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(At=Symbol.for("graceful-fs.queue"),xt=Symbol.for("graceful-fs.previous")):(At="___graceful-fs.queue",xt="___graceful-fs.previous");var debug=function(){};if(It.debuglog?debug=It.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(debug=function(){var t=It.format.apply(It,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),!Ft[At]){var Dt=h[At]||[];publishQueue(Ft,Dt),Ft.close=function(t){function close(e,n){return t.call(Ft,e,function(t){t||resetQueue(),"function"==typeof n&&n.apply(this,arguments)})}return Object.defineProperty(close,xt,{value:t}),close}(Ft.close),Ft.closeSync=function(t){function closeSync(e){t.apply(Ft,arguments),resetQueue()}return Object.defineProperty(closeSync,xt,{value:t}),closeSync}(Ft.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){debug(Ft[At]),u.equal(Ft[At].length,0)})}h[At]||publishQueue(h,Ft[At]);var Mt,jt=patch(Nt(Ft));function patch(t){$t(t),t.gracefulify=patch,t.createReadStream=function(e,n){return new t.ReadStream(e,n)},t.createWriteStream=function(e,n){return new t.WriteStream(e,n)};var e=t.readFile;t.readFile=function(t,n,r){"function"==typeof n&&(r=n,n=null);return function go$readFile(t,n,r,i){return e(t,n,function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?"function"==typeof r&&r.apply(this,arguments):enqueue([go$readFile,[t,n,r],e,i||Date.now(),Date.now()])})}(t,n,r)};var n=t.writeFile;t.writeFile=function(t,e,r,i){"function"==typeof r&&(i=r,r=null);return function go$writeFile(t,e,r,i,o){return n(t,e,r,function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):enqueue([go$writeFile,[t,e,r,i],n,o||Date.now(),Date.now()])})}(t,e,r,i)};var r=t.appendFile;r&&(t.appendFile=function(t,e,n,i){"function"==typeof n&&(i=n,n=null);return function go$appendFile(t,e,n,i,o){return r(t,e,n,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof i&&i.apply(this,arguments):enqueue([go$appendFile,[t,e,n,i],r,o||Date.now(),Date.now()])})}(t,e,n,i)});var i=t.copyFile;i&&(t.copyFile=function(t,e,n,r){"function"==typeof n&&(r=n,n=0);return function go$copyFile(t,e,n,r,o){return i(t,e,n,function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof r&&r.apply(this,arguments):enqueue([go$copyFile,[t,e,n,r],i,o||Date.now(),Date.now()])})}(t,e,n,r)});var o=t.readdir;t.readdir=function(t,e,n){"function"==typeof e&&(n=e,e=null);var r=s.test(process.version)?function(t,e,n,r){return o(t,fs$readdirCallback(t,e,n,r))}:function(t,e,n,r){return o(t,e,fs$readdirCallback(t,e,n,r))};return r(t,e,n);function fs$readdirCallback(t,e,n,i){return function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(s&&s.sort&&s.sort(),"function"==typeof n&&n.call(this,o,s)):enqueue([r,[t,e,n],o,i||Date.now(),Date.now()])}}};var s=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var a=Pt(t);ReadStream=a.ReadStream,WriteStream=a.WriteStream}var c=t.ReadStream;c&&(ReadStream.prototype=Object.create(c.prototype),ReadStream.prototype.open=function(){var t=this;open(t.path,t.flags,t.mode,function(e,n){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n),t.read())})});var l=t.WriteStream;l&&(WriteStream.prototype=Object.create(l.prototype),WriteStream.prototype.open=function(){var t=this;open(t.path,t.flags,t.mode,function(e,n){e?(t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n))})}),Object.defineProperty(t,"ReadStream",{get:function(){return ReadStream},set:function(t){ReadStream=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return WriteStream},set:function(t){WriteStream=t},enumerable:!0,configurable:!0});var u=ReadStream;Object.defineProperty(t,"FileReadStream",{get:function(){return u},set:function(t){u=t},enumerable:!0,configurable:!0});var h=WriteStream;function ReadStream(t,e){return this instanceof ReadStream?(c.apply(this,arguments),this):ReadStream.apply(Object.create(ReadStream.prototype),arguments)}function WriteStream(t,e){return this instanceof WriteStream?(l.apply(this,arguments),this):WriteStream.apply(Object.create(WriteStream.prototype),arguments)}Object.defineProperty(t,"FileWriteStream",{get:function(){return h},set:function(t){h=t},enumerable:!0,configurable:!0});var p=t.open;function open(t,e,n,r){return"function"==typeof n&&(r=n,n=null),function go$open(t,e,n,r,i){return p(t,e,n,function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof r&&r.apply(this,arguments):enqueue([go$open,[t,e,n,r],o,i||Date.now(),Date.now()])})}(t,e,n,r)}return t.open=open,t}function enqueue(t){debug("ENQUEUE",t[0].name,t[1]),Ft[At].push(t),retry()}function resetQueue(){for(var t=Date.now(),e=0;e<Ft[At].length;++e)Ft[At][e].length>2&&(Ft[At][e][3]=t,Ft[At][e][4]=t);retry()}function retry(){if(clearTimeout(Mt),Mt=void 0,0!==Ft[At].length){var t=Ft[At].shift(),e=t[0],n=t[1],r=t[2],i=t[3],o=t[4];if(void 0===i)debug("RETRY",e.name,n),e.apply(null,n);else if(Date.now()-i>=6e4){debug("TIMEOUT",e.name,n);var s=n.pop();"function"==typeof s&&s.call(null,r)}else{var a=Date.now()-o,c=Math.max(o-i,1);a>=Math.min(1.2*c,100)?(debug("RETRY",e.name,n),e.apply(null,n.concat([i]))):Ft[At].push(t)}void 0===Mt&&(Mt=setTimeout(retry,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Ft.__patched&&(jt=patch(Ft),Ft.__patched=!0),function(t){const e=bt.fromCallback,n=jt,r=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(t=>"function"==typeof n[t]);Object.assign(t,n),r.forEach(r=>{t[r]=e(n[r])}),t.exists=function(t,e){return"function"==typeof e?n.exists(t,e):new Promise(e=>n.exists(t,e))},t.read=function(t,e,r,i,o,s){return"function"==typeof s?n.read(t,e,r,i,o,s):new Promise((s,a)=>{n.read(t,e,r,i,o,(t,e,n)=>{if(t)return a(t);s({bytesRead:e,buffer:n})})})},t.write=function(t,e,...r){return"function"==typeof r[r.length-1]?n.write(t,e,...r):new Promise((i,o)=>{n.write(t,e,...r,(t,e,n)=>{if(t)return o(t);i({bytesWritten:e,buffer:n})})})},t.readv=function(t,e,...r){return"function"==typeof r[r.length-1]?n.readv(t,e,...r):new Promise((i,o)=>{n.readv(t,e,...r,(t,e,n)=>{if(t)return o(t);i({bytesRead:e,buffers:n})})})},t.writev=function(t,e,...r){return"function"==typeof r[r.length-1]?n.writev(t,e,...r):new Promise((i,o)=>{n.writev(t,e,...r,(t,e,n)=>{if(t)return o(t);i({bytesWritten:e,buffers:n})})})},"function"==typeof n.realpath.native?t.realpath.native=e(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(wt);var Tt={},Rt={};const Ht=n;Rt.checkPath=function(t){if("win32"===process.platform){if(/[<>:"|?*]/.test(t.replace(Ht.parse(t).root,""))){const e=new Error(`Path contains invalid characters: ${t}`);throw e.code="EINVAL",e}}};const Lt=wt,{checkPath:Vt}=Rt,getMode=t=>"number"==typeof t?t:{mode:511,...t}.mode;Tt.makeDir=async(t,e)=>(Vt(t),Lt.mkdir(t,{mode:getMode(e),recursive:!0})),Tt.makeDirSync=(t,e)=>(Vt(t),Lt.mkdirSync(t,{mode:getMode(e),recursive:!0}));const Wt=bt.fromPromise,{makeDir:qt,makeDirSync:Ut}=Tt,Bt=Wt(qt);var Gt={mkdirs:Bt,mkdirsSync:Ut,mkdirp:Bt,mkdirpSync:Ut,ensureDir:Bt,ensureDirSync:Ut};const Jt=bt.fromPromise,Yt=wt;var Kt={pathExists:Jt(function(t){return Yt.access(t).then(()=>!0).catch(()=>!1)}),pathExistsSync:Yt.existsSync};const zt=wt;var Qt={utimesMillis:(0,bt.fromPromise)(async function(t,e,n){const r=await zt.open(t,"r+");let i=null;try{await zt.futimes(r,e,n)}finally{try{await zt.close(r)}catch(t){i=t}}if(i)throw i}),utimesMillisSync:function(t,e,n){const r=zt.openSync(t,"r+");return zt.futimesSync(r,e,n),zt.closeSync(r)}};const Xt=wt,Zt=n,te=bt.fromPromise;function areIdentical$2(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function isSrcSubdir(t,e){const n=Zt.resolve(t).split(Zt.sep).filter(t=>t),r=Zt.resolve(e).split(Zt.sep).filter(t=>t);return n.every((t,e)=>r[e]===t)}function errMsg(t,e,n){return`Cannot ${n} '${t}' to a subdirectory of itself, '${e}'.`}var ee={checkPaths:te(async function(t,e,n,r){const{srcStat:i,destStat:o}=await function(t,e,n){const r=n.dereference?t=>Xt.stat(t,{bigint:!0}):t=>Xt.lstat(t,{bigint:!0});return Promise.all([r(t),r(e).catch(t=>{if("ENOENT"===t.code)return null;throw t})]).then(([t,e])=>({srcStat:t,destStat:e}))}(t,e,r);if(o){if(areIdentical$2(i,o)){const r=Zt.basename(t),s=Zt.basename(e);if("move"===n&&r!==s&&r.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(i.isDirectory()&&isSrcSubdir(t,e))throw new Error(errMsg(t,e,n));return{srcStat:i,destStat:o}}),checkPathsSync:function(t,e,n,r){const{srcStat:i,destStat:o}=function(t,e,n){let r;const i=n.dereference?t=>Xt.statSync(t,{bigint:!0}):t=>Xt.lstatSync(t,{bigint:!0}),o=i(t);try{r=i(e)}catch(t){if("ENOENT"===t.code)return{srcStat:o,destStat:null};throw t}return{srcStat:o,destStat:r}}(t,e,r);if(o){if(areIdentical$2(i,o)){const r=Zt.basename(t),s=Zt.basename(e);if("move"===n&&r!==s&&r.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(i.isDirectory()&&isSrcSubdir(t,e))throw new Error(errMsg(t,e,n));return{srcStat:i,destStat:o}},checkParentPaths:te(async function checkParentPaths(t,e,n,r){const i=Zt.resolve(Zt.dirname(t)),o=Zt.resolve(Zt.dirname(n));if(o===i||o===Zt.parse(o).root)return;let s;try{s=await Xt.stat(o,{bigint:!0})}catch(t){if("ENOENT"===t.code)return;throw t}if(areIdentical$2(e,s))throw new Error(errMsg(t,n,r));return checkParentPaths(t,e,o,r)}),checkParentPathsSync:function checkParentPathsSync(t,e,n,r){const i=Zt.resolve(Zt.dirname(t)),o=Zt.resolve(Zt.dirname(n));if(o===i||o===Zt.parse(o).root)return;let s;try{s=Xt.statSync(o,{bigint:!0})}catch(t){if("ENOENT"===t.code)return;throw t}if(areIdentical$2(e,s))throw new Error(errMsg(t,n,r));return checkParentPathsSync(t,e,o,r)},isSrcSubdir:isSrcSubdir,areIdentical:areIdentical$2};const ne=wt,re=n,{mkdirs:ie}=Gt,{pathExists:oe}=Kt,{utimesMillis:se}=Qt,ae=ee;async function runFilter(t,e,n){return!n.filter||n.filter(t,e)}async function getStatsAndPerformCopy(t,e,n,r){const i=r.dereference?ne.stat:ne.lstat,o=await i(e);if(o.isDirectory())return async function(t,e,n,r,i){e||await ne.mkdir(r);const o=[];for await(const t of await ne.opendir(n)){const e=re.join(n,t.name),s=re.join(r,t.name);o.push(runFilter(e,s,i).then(t=>{if(t)return ae.checkPaths(e,s,"copy",i).then(({destStat:t})=>getStatsAndPerformCopy(t,e,s,i))}))}await Promise.all(o),e||await ne.chmod(r,t.mode)}(o,t,e,n,r);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return async function(t,e,n,r,i){if(!e)return copyFile$1(t,n,r,i);if(i.overwrite)return await ne.unlink(r),copyFile$1(t,n,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}(o,t,e,n,r);if(o.isSymbolicLink())return async function(t,e,n,r){let i=await ne.readlink(e);r.dereference&&(i=re.resolve(process.cwd(),i));if(!t)return ne.symlink(i,n);let o=null;try{o=await ne.readlink(n)}catch(t){if("EINVAL"===t.code||"UNKNOWN"===t.code)return ne.symlink(i,n);throw t}r.dereference&&(o=re.resolve(process.cwd(),o));if(ae.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(ae.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return await ne.unlink(n),ne.symlink(i,n)}(t,e,n,r);if(o.isSocket())throw new Error(`Cannot copy a socket file: ${e}`);if(o.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${e}`);throw new Error(`Unknown file: ${e}`)}async function copyFile$1(t,e,n,r){if(await ne.copyFile(e,n),r.preserveTimestamps){128&t.mode||await function(t,e){return ne.chmod(t,128|e)}(n,t.mode);const r=await ne.stat(e);await se(n,r.atime,r.mtime)}return ne.chmod(n,t.mode)}var copy_1=async function(t,e,n={}){"function"==typeof n&&(n={filter:n}),n.clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:r,destStat:i}=await ae.checkPaths(t,e,"copy",n);if(await ae.checkParentPaths(t,r,e,"copy"),!await runFilter(t,e,n))return;const o=re.dirname(e);await oe(o)||await ie(o),await getStatsAndPerformCopy(i,t,e,n)};const ce=jt,le=n,ue=Gt.mkdirsSync,he=Qt.utimesMillisSync,pe=ee;function getStats(t,e,n,r){const i=(r.dereference?ce.statSync:ce.lstatSync)(e);if(i.isDirectory())return function(t,e,n,r,i){return e?copyDir(n,r,i):function(t,e,n,r){return ce.mkdirSync(n),copyDir(e,n,r),setDestMode(n,t)}(t.mode,n,r,i)}(i,t,e,n,r);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return function(t,e,n,r,i){return e?function(t,e,n,r){if(r.overwrite)return ce.unlinkSync(n),copyFile(t,e,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}(t,n,r,i):copyFile(t,n,r,i)}(i,t,e,n,r);if(i.isSymbolicLink())return function(t,e,n,r){let i=ce.readlinkSync(e);r.dereference&&(i=le.resolve(process.cwd(),i));if(t){let t;try{t=ce.readlinkSync(n)}catch(t){if("EINVAL"===t.code||"UNKNOWN"===t.code)return ce.symlinkSync(i,n);throw t}if(r.dereference&&(t=le.resolve(process.cwd(),t)),pe.isSrcSubdir(i,t))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${t}'.`);if(pe.isSrcSubdir(t,i))throw new Error(`Cannot overwrite '${t}' with '${i}'.`);return function(t,e){return ce.unlinkSync(e),ce.symlinkSync(t,e)}(i,n)}return ce.symlinkSync(i,n)}(t,e,n,r);if(i.isSocket())throw new Error(`Cannot copy a socket file: ${e}`);if(i.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${e}`);throw new Error(`Unknown file: ${e}`)}function copyFile(t,e,n,r){return ce.copyFileSync(e,n),r.preserveTimestamps&&function(t,e,n){(function(t){return!(128&t)})(t)&&function(t,e){setDestMode(t,128|e)}(n,t);(function(t,e){const n=ce.statSync(t);he(e,n.atime,n.mtime)})(e,n)}(t.mode,e,n),setDestMode(n,t.mode)}function setDestMode(t,e){return ce.chmodSync(t,e)}function copyDir(t,e,n){const r=ce.opendirSync(t);try{let i;for(;null!==(i=r.readSync());)copyDirItem(i.name,t,e,n)}finally{r.closeSync()}}function copyDirItem(t,e,n,r){const i=le.join(e,t),o=le.join(n,t);if(r.filter&&!r.filter(i,o))return;const{destStat:s}=pe.checkPathsSync(i,o,"copy",r);return getStats(s,i,o,r)}var copySync_1=function(t,e,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:r,destStat:i}=pe.checkPathsSync(t,e,"copy",n);if(pe.checkParentPathsSync(t,r,e,"copy"),n.filter&&!n.filter(t,e))return;const o=le.dirname(e);return ce.existsSync(o)||ue(o),getStats(i,t,e,n)};var de={copy:(0,bt.fromPromise)(copy_1),copySync:copySync_1};const fe=jt;var me={remove:(0,bt.fromCallback)(function(t,e){fe.rm(t,{recursive:!0,force:!0},e)}),removeSync:function(t){fe.rmSync(t,{recursive:!0,force:!0})}};const ge=bt.fromPromise,ye=wt,we=n,be=Gt,ve=me,_e=ge(async function(t){let e;try{e=await ye.readdir(t)}catch{return be.mkdirs(t)}return Promise.all(e.map(e=>ve.remove(we.join(t,e))))});function emptyDirSync(t){let e;try{e=ye.readdirSync(t)}catch{return be.mkdirsSync(t)}e.forEach(e=>{e=we.join(t,e),ve.removeSync(e)})}var Se={emptyDirSync:emptyDirSync,emptydirSync:emptyDirSync,emptyDir:_e,emptydir:_e};const Oe=bt.fromPromise,Ce=n,Ee=wt,ke=Gt;var Ae={createFile:Oe(async function(t){let e;try{e=await Ee.stat(t)}catch{}if(e&&e.isFile())return;const n=Ce.dirname(t);let r=null;try{r=await Ee.stat(n)}catch(e){if("ENOENT"===e.code)return await ke.mkdirs(n),void await Ee.writeFile(t,"");throw e}r.isDirectory()?await Ee.writeFile(t,""):await Ee.readdir(n)}),createFileSync:function(t){let e;try{e=Ee.statSync(t)}catch{}if(e&&e.isFile())return;const n=Ce.dirname(t);try{Ee.statSync(n).isDirectory()||Ee.readdirSync(n)}catch(t){if(!t||"ENOENT"!==t.code)throw t;ke.mkdirsSync(n)}Ee.writeFileSync(t,"")}};const xe=bt.fromPromise,Fe=n,$e=wt,Pe=Gt,{pathExists:Ne}=Kt,{areIdentical:Ie}=ee;var De={createLink:xe(async function(t,e){let n,r;try{n=await $e.lstat(e)}catch{}try{r=await $e.lstat(t)}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}if(n&&Ie(r,n))return;const i=Fe.dirname(e);await Ne(i)||await Pe.mkdirs(i),await $e.link(t,e)}),createLinkSync:function(t,e){let n;try{n=$e.lstatSync(e)}catch{}try{const e=$e.lstatSync(t);if(n&&Ie(e,n))return}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}const r=Fe.dirname(e);return $e.existsSync(r)||Pe.mkdirsSync(r),$e.linkSync(t,e)}};const Me=n,je=wt,{pathExists:Te}=Kt;var Re={symlinkPaths:(0,bt.fromPromise)(async function(t,e){if(Me.isAbsolute(t)){try{await je.lstat(t)}catch(t){throw t.message=t.message.replace("lstat","ensureSymlink"),t}return{toCwd:t,toDst:t}}const n=Me.dirname(e),r=Me.join(n,t);if(await Te(r))return{toCwd:r,toDst:t};try{await je.lstat(t)}catch(t){throw t.message=t.message.replace("lstat","ensureSymlink"),t}return{toCwd:t,toDst:Me.relative(n,t)}}),symlinkPathsSync:function(t,e){if(Me.isAbsolute(t)){if(!je.existsSync(t))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}const n=Me.dirname(e),r=Me.join(n,t);if(je.existsSync(r))return{toCwd:r,toDst:t};if(!je.existsSync(t))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:Me.relative(n,t)}}};const He=wt;var Le={symlinkType:(0,bt.fromPromise)(async function(t,e){if(e)return e;let n;try{n=await He.lstat(t)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}),symlinkTypeSync:function(t,e){if(e)return e;let n;try{n=He.lstatSync(t)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}};const Ve=bt.fromPromise,We=n,qe=wt,{mkdirs:Ue,mkdirsSync:Be}=Gt,{symlinkPaths:Ge,symlinkPathsSync:Je}=Re,{symlinkType:Ye,symlinkTypeSync:Ke}=Le,{pathExists:ze}=Kt,{areIdentical:Qe}=ee;var Xe={createSymlink:Ve(async function(t,e,n){let r;try{r=await qe.lstat(e)}catch{}if(r&&r.isSymbolicLink()){const[n,r]=await Promise.all([qe.stat(t),qe.stat(e)]);if(Qe(n,r))return}const i=await Ge(t,e);t=i.toDst;const o=await Ye(i.toCwd,n),s=We.dirname(e);return await ze(s)||await Ue(s),qe.symlink(t,e,o)}),createSymlinkSync:function(t,e,n){let r;try{r=qe.lstatSync(e)}catch{}if(r&&r.isSymbolicLink()){const n=qe.statSync(t),r=qe.statSync(e);if(Qe(n,r))return}const i=Je(t,e);t=i.toDst,n=Ke(i.toCwd,n);const o=We.dirname(e);return qe.existsSync(o)||Be(o),qe.symlinkSync(t,e,n)}};const{createFile:Ze,createFileSync:tn}=Ae,{createLink:en,createLinkSync:nn}=De,{createSymlink:rn,createSymlinkSync:on}=Xe;var sn={createFile:Ze,createFileSync:tn,ensureFile:Ze,ensureFileSync:tn,createLink:en,createLinkSync:nn,ensureLink:en,ensureLinkSync:nn,createSymlink:rn,createSymlinkSync:on,ensureSymlink:rn,ensureSymlinkSync:on};var an={stringify:function(t,{EOL:e="\n",finalEOL:n=!0,replacer:r=null,spaces:i}={}){const o=n?e:"";return JSON.stringify(t,r,i).replace(/\n/g,e)+o},stripBom:function(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}};let cn;try{cn=jt}catch(t){cn=r}const ln=bt,{stringify:un,stripBom:hn}=an;const pn=ln.fromPromise(async function(t,e={}){"string"==typeof e&&(e={encoding:e});const n=e.fs||cn,r=!("throws"in e)||e.throws;let i,o=await ln.fromCallback(n.readFile)(t,e);o=hn(o);try{i=JSON.parse(o,e?e.reviver:null)}catch(e){if(r)throw e.message=`${t}: ${e.message}`,e;return null}return i});const dn=ln.fromPromise(async function(t,e,n={}){const r=n.fs||cn,i=un(e,n);await ln.fromCallback(r.writeFile)(t,i,n)});const fn={readFile:pn,readFileSync:function(t,e={}){"string"==typeof e&&(e={encoding:e});const n=e.fs||cn,r=!("throws"in e)||e.throws;try{let r=n.readFileSync(t,e);return r=hn(r),JSON.parse(r,e.reviver)}catch(e){if(r)throw e.message=`${t}: ${e.message}`,e;return null}},writeFile:dn,writeFileSync:function(t,e,n={}){const r=n.fs||cn,i=un(e,n);return r.writeFileSync(t,i,n)}};var mn={readJson:fn.readFile,readJsonSync:fn.readFileSync,writeJson:fn.writeFile,writeJsonSync:fn.writeFileSync};const gn=bt.fromPromise,yn=wt,wn=n,bn=Gt,vn=Kt.pathExists;var _n={outputFile:gn(async function(t,e,n="utf-8"){const r=wn.dirname(t);return await vn(r)||await bn.mkdirs(r),yn.writeFile(t,e,n)}),outputFileSync:function(t,...e){const n=wn.dirname(t);yn.existsSync(n)||bn.mkdirsSync(n),yn.writeFileSync(t,...e)}};const{stringify:Sn}=an,{outputFile:On}=_n;var outputJson_1=async function(t,e,n={}){const r=Sn(e,n);await On(t,r,n)};const{stringify:Cn}=an,{outputFileSync:En}=_n;var outputJsonSync_1=function(t,e,n){const r=Cn(e,n);En(t,r,n)};const kn=bt.fromPromise,An=mn;An.outputJson=kn(outputJson_1),An.outputJsonSync=outputJsonSync_1,An.outputJSON=An.outputJson,An.outputJSONSync=An.outputJsonSync,An.writeJSON=An.writeJson,An.writeJSONSync=An.writeJsonSync,An.readJSON=An.readJson,An.readJSONSync=An.readJsonSync;var xn=An;const Fn=wt,$n=n,{copy:Pn}=de,{remove:Nn}=me,{mkdirp:In}=Gt,{pathExists:Dn}=Kt,Mn=ee;var move_1=async function(t,e,n={}){const r=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:o=!1}=await Mn.checkPaths(t,e,"move",n);await Mn.checkParentPaths(t,i,e,"move");const s=$n.dirname(e);return $n.parse(s).root!==s&&await In(s),async function(t,e,n,r){if(!r)if(n)await Nn(e);else if(await Dn(e))throw new Error("dest already exists.");try{await Fn.rename(t,e)}catch(r){if("EXDEV"!==r.code)throw r;await async function(t,e,n){const r={overwrite:n,errorOnExist:!0,preserveTimestamps:!0};return await Pn(t,e,r),Nn(t)}(t,e,n)}}(t,e,r,o)};const jn=jt,Tn=n,Rn=de.copySync,Hn=me.removeSync,Ln=Gt.mkdirpSync,Vn=ee;function rename(t,e,n){try{jn.renameSync(t,e)}catch(r){if("EXDEV"!==r.code)throw r;return function(t,e,n){const r={overwrite:n,errorOnExist:!0,preserveTimestamps:!0};return Rn(t,e,r),Hn(t)}(t,e,n)}}var moveSync_1=function(t,e,n){const r=(n=n||{}).overwrite||n.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Vn.checkPathsSync(t,e,"move",n);return Vn.checkParentPathsSync(t,i,e,"move"),function(t){const e=Tn.dirname(t);return Tn.parse(e).root===e}(e)||Ln(Tn.dirname(e)),function(t,e,n,r){if(r)return rename(t,e,n);if(n)return Hn(e),rename(t,e,n);if(jn.existsSync(e))throw new Error("dest already exists.");return rename(t,e,n)}(t,e,r,o)};var Wn={move:(0,bt.fromPromise)(move_1),moveSync:moveSync_1},qn={...wt,...de,...Se,...sn,...xn,...Gt,...Wn,..._n,...Kt,...me};const Un=o;var Bn={CONFIG_FILE:n.join(Un.homedir(),".ccapi-config.json"),CLAUDE_ENV_KEYS:{url:"ANTHROPIC_BASE_URL",key:"ANTHROPIC_API_KEY",token:"ANTHROPIC_AUTH_TOKEN",model:"ANTHROPIC_MODEL",fast:"ANTHROPIC_SMALL_FAST_MODEL",timeout:"API_TIMEOUT_MS",tokens:"CLAUDE_CODE_MAX_OUTPUT_TOKENS",http:"HTTP_PROXY",https:"HTTPS_PROXY"},ERROR_MESSAGES:{CONFIG_NOT_FOUND:"配置文件未找到，请先使用 ccapi set 设置路径",SETTINGS_NOT_FOUND:"settings.json 文件不存在，请检查路径设置",API_CONFIG_NOT_FOUND:"api.json 文件不存在，请检查路径设置",INVALID_JSON:"JSON文件格式错误",CONFIG_NAME_NOT_FOUND:"指定的配置名称不存在",SAME_CONFIG:"当前已使用该配置",BACKUP_FAILED:"settings.json 备份失败"},SUCCESS_MESSAGES:{CONFIG_SAVED:"配置路径已保存",CONFIG_SWITCHED:"配置切换成功，请重启Claude终端后生效",BACKUP_CREATED:"settings.json 已备份"}};const Gn=qn,Jn=n,{ERROR_MESSAGES:Yn}=Bn;var Kn={readJsonFile:async function(t){try{if(!await Gn.pathExists(t))throw new Error(`文件不存在: ${t}`);const e=await Gn.readFile(t,"utf8");return JSON.parse(e)}catch(e){if(e.message.includes("JSON"))throw new Error(`${Yn.INVALID_JSON}: ${t}`);throw e}},writeJsonFile:async function(t,e){try{await Gn.ensureDir(Jn.dirname(t));const n=JSON.stringify(e,null,2);await Gn.writeFile(t,n,"utf8")}catch(e){throw new Error(`写入文件失败: ${t} - ${e.message}`)}},backupFile:async function(t){try{const e=`${t}.backup`;return await Gn.copy(t,e),e}catch(t){throw new Error(`${Yn.BACKUP_FAILED}: ${t.message}`)}},fileExists:async function(t){return await Gn.pathExists(t)},validatePath:function(t){return!(!t||"string"!=typeof t)&&(!!Jn.isAbsolute(t)&&".json"===Jn.extname(t).toLowerCase())}};const{validatePath:zn}=Kn;var Qn={validateApiConfig:function(t){if(!t||"object"!=typeof t)return!1;const e=Object.keys(t);if(0===e.length)return!1;for(const n of e){const e=t[n];if(!e||"object"!=typeof e)return!1;if(!e.url||"string"!=typeof e.url)return!1;if(!e.key&&!e.token)return!1}return!0},validateSettingsConfig:function(t){return!(!t||"object"!=typeof t)},validateConfigName:function(t,e){return t&&void 0!==t[e]},validateSetCommand:function(t){const{settings:e,api:n}=t;return e&&!zn(e)?{valid:!1,error:"settings路径格式错误，请提供绝对路径的settings.json文件"}:n&&!zn(n)?{valid:!1,error:"api路径格式错误，请提供绝对路径的api.json文件"}:{valid:!0}}};const{readJsonFile:Xn,writeJsonFile:Zn,fileExists:tr}=Kn,{CONFIG_FILE:er,ERROR_MESSAGES:nr}=Bn;async function readConfig(){try{return await tr(er)?await Xn(er):{}}catch(t){throw new Error(`读取配置失败: ${t.message}`)}}async function writeConfig(t){try{await Zn(er,t)}catch(t){throw new Error(`保存配置失败: ${t.message}`)}}var rr={getSettingsPath:async function(){return(await readConfig()).settingsPath||null},getApiConfigPath:async function(){return(await readConfig()).apiConfigPath||null},setSettingsPath:async function(t){const e=await readConfig();e.settingsPath=t,await writeConfig(e)},setApiConfigPath:async function(t){const e=await readConfig();e.apiConfigPath=t,await writeConfig(e)},validateConfig:async function(){const t=await readConfig();if(!t.settingsPath)throw new Error("未设置settings.json路径");if(!t.apiConfigPath)throw new Error("未设置api.json路径");if(!await tr(t.settingsPath))throw new Error(nr.SETTINGS_NOT_FOUND);if(!await tr(t.apiConfigPath))throw new Error(nr.API_CONFIG_NOT_FOUND);return t}};const ir=ft,{validateSetCommand:or}=Qn,{setSettingsPath:sr,setApiConfigPath:ar,getSettingsPath:cr,getApiConfigPath:lr}=rr,{fileExists:ur}=Kn,{SUCCESS_MESSAGES:hr}=Bn;var set=async function(t){try{const{settings:e,api:n}=t;if(!e&&!n){console.log(ir.blue("当前配置路径:"));try{const t=await cr(),e=await lr();if(t){const e=await ur(t),n=e?ir.green("✓"):ir.red("✗");console.log(`  settings.json: ${n} ${ir.cyan(t)}`),e||console.log(`    ${ir.yellow("警告: 当前路径文件不存在")}`)}else console.log(`  settings.json: ${ir.yellow("未设置")}`);if(e){const t=await ur(e),n=t?ir.green("✓"):ir.red("✗");console.log(`  api.json: ${n} ${ir.cyan(e)}`),t||console.log(`    ${ir.yellow("警告: 当前路径文件不存在")}`)}else console.log(`  api.json: ${ir.yellow("未设置")}`);console.log(),console.log("使用以下命令设置路径:"),console.log(`  ${ir.cyan("ccapi set --settings <path>")} - 设置 settings.json 路径`),console.log(`  ${ir.cyan("ccapi set --api <path>")} - 设置 api.json 路径`)}catch(t){console.error(ir.red("读取配置失败:"),t.message)}return}const r=or(t);if(!r.valid)return void console.error(ir.red("参数错误:"),r.error);const i=[];e&&(await ur(e)||(console.warn(ir.yellow("警告:"),`settings.json文件不存在: ${e}`),console.log("路径已保存，请确保文件存在后再使用其他命令")),await sr(e),i.push(`settings.json 路径: ${ir.green(e)}`)),n&&(await ur(n)||(console.warn(ir.yellow("警告:"),`api.json文件不存在: ${n}`),console.log("路径已保存，请确保文件存在后再使用其他命令")),await ar(n),i.push(`api.json 路径: ${ir.green(n)}`)),console.log(ir.blue(hr.CONFIG_SAVED)),i.forEach(t=>console.log(`  ${t}`))}catch(t){console.error(ir.red("设置失败:"),t.message),process.exit(1)}};const pr=ft,{validateConfig:dr}=rr,{readJsonFile:fr}=Kn,{validateApiConfig:mr,validateSettingsConfig:gr}=Qn,{CLAUDE_ENV_KEYS:yr}=Bn;function formatModelDisplay(t,e,n){if(Array.isArray(t)){const r=[`${n}:`];return t.forEach((t,n)=>{const i=n===e,o=i?"    * - ":"      - ",s=i?pr.green.bold(t):pr.cyan(t);r.push(`${o}${n+1}: ${s}`)}),r}return[`${n}: ${0===e?pr.green.bold(t):pr.cyan(t)}`]}var list=async function(){try{const t=await dr(),e=await fr(t.apiConfigPath);if(!mr(e))return void console.error(pr.red("错误:"),"api.json文件格式不正确");const n=await fr(t.settingsPath);if(!gr(n))return void console.error(pr.red("错误:"),"settings.json文件格式不正确");const r=function(t,e){const n=t.env?.[yr.url],r=t.env?.[yr.model],i=t.env?.[yr.fast];if(!n)return{name:null,modelIndex:-1,fastIndex:-1};for(const[t,o]of Object.entries(e))if(o.url===n){let e=-1,n=-1;return r&&(Array.isArray(o.model)?e=o.model.indexOf(r):o.model===r&&(e=0)),i&&(Array.isArray(o.fast)?n=o.fast.indexOf(i):o.fast===i&&(n=0)),{name:t,modelIndex:e,fastIndex:n}}return{name:null,modelIndex:-1,fastIndex:-1}}(n,e);console.log(pr.blue.bold("可用的API配置:"));const i=Object.keys(e);if(0===i.length)return void console.log(pr.yellow("暂无可用配置"));i.sort().forEach(t=>{!function(t,e,n){const r=t===n.name,i=r?pr.green("* "):"  ",o=r?pr.green.bold(`【${t}】`):pr.cyan(`【${t}】`);e.model=e.model||"claude-sonnet-4-20250514";let s=[];s.push(`URL: ${pr.cyan(e.url)}`);const a=formatModelDisplay(e.model,r?n.modelIndex:-1,"Model");if(s.push(...a),e.fast){const t=formatModelDisplay(e.fast,r?n.fastIndex:-1,"Fast");s.push(...t)}if(e.key){const t=e.key.length>15?e.key.slice(0,15)+"...":e.key;s.push(`Key: ${pr.cyan(t)}`)}if(e.token){const t=e.token.length>15?e.token.slice(0,15)+"...":e.token;s.push(`Token: ${pr.cyan(t)}`)}e.http&&s.push(`HTTP: ${pr.cyan(e.http)}`),e.https&&s.push(`HTTPS: ${pr.cyan(e.https)}`),console.log(`${i}${o}`),s.forEach(t=>{console.log(`    ${t}`)})}(t,e[t],r),console.log()}),r.name?console.log(pr.green(`当前使用的配置: ${r.name}`)):console.log(pr.yellow("当前未进行任何配置"))}catch(t){t.message.includes("未设置")||t.message.includes("不存在")?(console.error(pr.red("配置错误:"),t.message),console.log("请先使用",pr.cyan("ccapi set"),"命令设置配置文件路径")):console.error(pr.red("列举配置失败:"),t.message),process.exit(1)}};const wr=ft,{validateConfig:br}=rr,{readJsonFile:vr,writeJsonFile:_r,backupFile:Sr}=Kn,{validateApiConfig:Or,validateSettingsConfig:Cr,validateConfigName:Er}=Qn,{CLAUDE_ENV_KEYS:kr,ERROR_MESSAGES:Ar,SUCCESS_MESSAGES:xr}=Bn;function selectModel(t,e,n){if(Array.isArray(t)){const n=e>0?e-1:0;if(n>=t.length)throw new Error(`模型索引 ${e} 超出范围，可用范围: 1-${t.length}`);return t[n]}return t||n}var use=async function(t,e={}){try{const n=await br(),r=await vr(n.apiConfigPath);if(!Or(r))return void console.error(wr.red("错误:"),"api.json文件格式不正确");if(!Er(r,t))return console.error(wr.red("设置错误:"),`${Ar.CONFIG_NAME_NOT_FOUND}: ${t}`),void console.log(wr.green("当前可用的配置:"),Object.keys(r).join(", "));const i=await vr(n.settingsPath);if(!Cr(i))return void console.error(wr.red("错误:"),"settings.json文件格式不正确");const o={...r[t]};o.model=o.model||"claude-sonnet-4-20250514";try{const t=selectModel(o.model,e.model?parseInt(e.model):0,"claude-sonnet-4-20250514"),n=selectModel(o.fast,e.fast?parseInt(e.fast):0,"");o.model=t,o.fast=n}catch(t){return void console.error(wr.red("参数错误:"),t.message)}console.log("正在备份settings.json...");const s=await Sr(n.settingsPath);console.log(wr.green(xr.BACKUP_CREATED),`(${s})`),console.log(`正在切换配置: ${t}`);const a=function(t,e){t.env||(t.env={});const n=t.env;return n[kr.url]=e.url,n[kr.model]=e.model,e.fast?n[kr.fast]=e.fast:delete n[kr.fast],e.timeout?n[kr.timeout]=e.timeout:delete n[kr.timeout],e.tokens?n[kr.tokens]=e.tokens:delete n[kr.tokens],e.key&&e.token?(n[kr.key]=e.key,n[kr.token]=e.token):(e.key&&(n[kr.key]=e.key,delete n[kr.token]),e.token&&(n[kr.token]=e.token,delete n[kr.key])),e.http?n[kr.http]=e.http:delete n[kr.http],e.https?n[kr.https]=e.https:delete n[kr.https],t}(i,o);if(await _r(n.settingsPath,a),console.log(),console.log(wr.green.bold(xr.CONFIG_SWITCHED)),console.log(),console.log(wr.blue("当前配置详情:")),console.log(`  名称: ${wr.cyan(t)}`),console.log(`  URL: ${wr.cyan(o.url)}`),console.log(`  Model: ${wr.cyan(o.model)}`),o.fast&&console.log(`  Fast: ${wr.cyan(o.fast)}`),o.key){const t=o.key.length>15?o.key.slice(0,15)+"...":o.key;console.log(`  Key: ${wr.cyan(t)}`)}if(o.token){const t=o.token.length>15?o.token.slice(0,15)+"...":o.token;console.log(`  Token: ${wr.cyan(t)}`)}o.http&&console.log(`  HTTP Proxy: ${wr.cyan(o.http)}`),o.https&&console.log(`  HTTPS Proxy: ${wr.cyan(o.https)}`),console.log()}catch(t){t.message.includes("未设置")||t.message.includes("不存在")?(console.error(wr.red("配置错误:"),t.message),console.log("请先使用",wr.cyan("ccapi set"),"命令设置配置文件路径")):console.error(wr.red("切换配置失败:"),t.message),process.exit(1)}};const{Command:Fr}=U,$r=ft,Pr=mt,Nr=version,Ir=set,Dr=list,Mr=use,jr=new Fr;jr.name("ccapi").description("Claude settings.json配置管理工具").version(Pr.version),jr.option("-v, --version","显示版本信息").action(t=>{t.version&&Nr()}),jr.command("set").description("设置配置文件路径").option("--settings <path>","Claude Code settings.json文件路径").option("--api <path>","自定义API配置文件路径").action(Ir),jr.command("ls").alias("list").description("显示当前API配置列表").action(Dr),jr.command("use <name>").description("切换到指定的API配置").option("-m, --model <index>","指定要切换的模型索引（从1开始，仅对数组类型model有效）").option("-f, --fast <index>","指定要切换的快速模型索引（从1开始，仅对数组类型fast有效）").action((t,e)=>{Mr(t,e)}),process.on("uncaughtException",t=>{console.error($r.red("程序错误:"),t.message),"development"===process.env.NODE_ENV&&console.error(t.stack),process.exit(1)}),process.on("unhandledRejection",(t,e)=>{console.error($r.red("未处理的Promise错误:"),t),"development"===process.env.NODE_ENV&&console.error("Promise:",e),process.exit(1)}),jr.parse(process.argv),process.argv.slice(2).length||jr.outputHelp(),module.exports={};
