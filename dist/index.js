#!/usr/bin/env node
"use strict";var e=require("events"),t=require("child_process"),n=require("path"),r=require("fs"),i=require("process"),o=require("os"),s=require("tty"),a=require("constants"),c=require("stream"),l=require("util"),u=require("assert"),h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},p={exports:{}},d={},m={};let f=class extends Error{constructor(e,t,n){super(n),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=t,this.exitCode=e,this.nestedError=void 0}};m.CommanderError=f,m.InvalidArgumentError=class extends f{constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};const{InvalidArgumentError:g}=m;d.Argument=class{constructor(e,t){switch(this.description=t||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e}this._name.length>3&&"..."===this._name.slice(-3)&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(e,t){return t!==this.defaultValue&&Array.isArray(t)?t.concat(e):[e]}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}argParser(e){return this.parseArg=e,this}choices(e){return this.argChoices=e.slice(),this.parseArg=(e,t)=>{if(!this.argChoices.includes(e))throw new g(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(e,t):e},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}},d.humanReadableArgName=function(e){const t=e.name()+(!0===e.variadic?"...":"");return e.required?"<"+t+">":"["+t+"]"};var y={},w={};const{humanReadableArgName:b}=d;w.Help=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(e){const t=e.commands.filter(e=>!e._hidden);if(e._hasImplicitHelpCommand()){const[,n,r]=e._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),i=e.createCommand(n).helpOption(!1);i.description(e._helpCommandDescription),r&&i.arguments(r),t.push(i)}return this.sortSubcommands&&t.sort((e,t)=>e.name().localeCompare(t.name())),t}compareOptions(e,t){const getSortKey=e=>e.short?e.short.replace(/^-/,""):e.long.replace(/^--/,"");return getSortKey(e).localeCompare(getSortKey(t))}visibleOptions(e){const t=e.options.filter(e=>!e.hidden),n=e._hasHelpOption&&e._helpShortFlag&&!e._findOption(e._helpShortFlag),r=e._hasHelpOption&&!e._findOption(e._helpLongFlag);if(n||r){let i;i=n?r?e.createOption(e._helpFlags,e._helpDescription):e.createOption(e._helpShortFlag,e._helpDescription):e.createOption(e._helpLongFlag,e._helpDescription),t.push(i)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];const t=[];for(let n=e.parent;n;n=n.parent){const e=n.options.filter(e=>!e.hidden);t.push(...e)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleArguments(e){return e._argsDescription&&e.registeredArguments.forEach(t=>{t.description=t.description||e._argsDescription[t.name()]||""}),e.registeredArguments.find(e=>e.description)?e.registeredArguments:[]}subcommandTerm(e){const t=e.registeredArguments.map(e=>b(e)).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(t?" "+t:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce((e,n)=>Math.max(e,t.subcommandTerm(n).length),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce((e,n)=>Math.max(e,t.optionTerm(n).length),0)}longestGlobalOptionTermLength(e,t){return t.visibleGlobalOptions(e).reduce((e,n)=>Math.max(e,t.optionTerm(n).length),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce((e,n)=>Math.max(e,t.argumentTerm(n).length),0)}commandUsage(e){let t=e._name;e._aliases[0]&&(t=t+"|"+e._aliases[0]);let n="";for(let t=e.parent;t;t=t.parent)n=t.name()+" "+n;return n+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){const t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(e=>JSON.stringify(e)).join(", ")}`),void 0!==e.defaultValue){(e.required||e.optional||e.isBoolean()&&"boolean"==typeof e.defaultValue)&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`)}return void 0!==e.presetArg&&e.optional&&t.push(`preset: ${JSON.stringify(e.presetArg)}`),void 0!==e.envVar&&t.push(`env: ${e.envVar}`),t.length>0?`${e.description} (${t.join(", ")})`:e.description}argumentDescription(e){const t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(e=>JSON.stringify(e)).join(", ")}`),void 0!==e.defaultValue&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),t.length>0){const n=`(${t.join(", ")})`;return e.description?`${e.description} ${n}`:n}return e.description}formatHelp(e,t){const n=t.padWidth(e,t),r=t.helpWidth||80;function formatItem(e,i){if(i){const o=`${e.padEnd(n+2)}${i}`;return t.wrap(o,r-2,n+2)}return e}function formatList(e){return e.join("\n").replace(/^/gm," ".repeat(2))}let i=[`Usage: ${t.commandUsage(e)}`,""];const o=t.commandDescription(e);o.length>0&&(i=i.concat([t.wrap(o,r,0),""]));const s=t.visibleArguments(e).map(e=>formatItem(t.argumentTerm(e),t.argumentDescription(e)));s.length>0&&(i=i.concat(["Arguments:",formatList(s),""]));const a=t.visibleOptions(e).map(e=>formatItem(t.optionTerm(e),t.optionDescription(e)));if(a.length>0&&(i=i.concat(["Options:",formatList(a),""])),this.showGlobalOptions){const n=t.visibleGlobalOptions(e).map(e=>formatItem(t.optionTerm(e),t.optionDescription(e)));n.length>0&&(i=i.concat(["Global Options:",formatList(n),""]))}const c=t.visibleCommands(e).map(e=>formatItem(t.subcommandTerm(e),t.subcommandDescription(e)));return c.length>0&&(i=i.concat(["Commands:",formatList(c),""])),i.join("\n")}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestGlobalOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}wrap(e,t,n,r=40){const i=new RegExp("[\\n][ \\f\\t\\v   -   　\ufeff]+");if(e.match(i))return e;const o=t-n;if(o<r)return e;const s=e.slice(0,n),a=e.slice(n).replace("\r\n","\n"),c=" ".repeat(n),l="\\s​",u=new RegExp(`\n|.{1,${o-1}}([${l}]|$)|[^${l}]+?([${l}]|$)`,"g");return s+(a.match(u)||[]).map((e,t)=>"\n"===e?"":(t>0?c:"")+e.trimEnd()).join("\n")}};var v={};const{InvalidArgumentError:_}=m;function splitOptionFlags$1(e){let t,n;const r=e.split(/[ |,]+/);return r.length>1&&!/^[[<]/.test(r[1])&&(t=r.shift()),n=r.shift(),!t&&/^-[^-]$/.test(n)&&(t=n,n=void 0),{shortFlag:t,longFlag:n}}v.Option=class{constructor(e,t){this.flags=e,this.description=t||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;const n=splitOptionFlags$1(e);this.short=n.shortFlag,this.long=n.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}preset(e){return this.presetArg=e,this}conflicts(e){return this.conflictsWith=this.conflictsWith.concat(e),this}implies(e){let t=e;return"string"==typeof e&&(t={[e]:!0}),this.implied=Object.assign(this.implied||{},t),this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_concatValue(e,t){return t!==this.defaultValue&&Array.isArray(t)?t.concat(e):[e]}choices(e){return this.argChoices=e.slice(),this.parseArg=(e,t)=>{if(!this.argChoices.includes(e))throw new _(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(e,t):e},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.name().replace(/^no-/,"").split("-").reduce((e,t)=>e+t[0].toUpperCase()+t.slice(1))}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}},v.splitOptionFlags=splitOptionFlags$1,v.DualOptions=class{constructor(e){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,e.forEach(e=>{e.negate?this.negativeOptions.set(e.attributeName(),e):this.positiveOptions.set(e.attributeName(),e)}),this.negativeOptions.forEach((e,t)=>{this.positiveOptions.has(t)&&this.dualOptions.add(t)})}valueFromOption(e,t){const n=t.attributeName();if(!this.dualOptions.has(n))return!0;const r=this.negativeOptions.get(n).presetArg,i=void 0!==r&&r;return t.negate===(i===e)}};var S={};S.suggestSimilar=function(e,t){if(!t||0===t.length)return"";t=Array.from(new Set(t));const n=e.startsWith("--");n&&(e=e.slice(2),t=t.map(e=>e.slice(2)));let r=[],i=3;return t.forEach(t=>{if(t.length<=1)return;const n=function(e,t){if(Math.abs(e.length-t.length)>3)return Math.max(e.length,t.length);const n=[];for(let t=0;t<=e.length;t++)n[t]=[t];for(let e=0;e<=t.length;e++)n[0][e]=e;for(let r=1;r<=t.length;r++)for(let i=1;i<=e.length;i++){let o=1;o=e[i-1]===t[r-1]?0:1,n[i][r]=Math.min(n[i-1][r]+1,n[i][r-1]+1,n[i-1][r-1]+o),i>1&&r>1&&e[i-1]===t[r-2]&&e[i-2]===t[r-1]&&(n[i][r]=Math.min(n[i][r],n[i-2][r-2]+1))}return n[e.length][t.length]}(e,t),o=Math.max(e.length,t.length);(o-n)/o>.4&&(n<i?(i=n,r=[t]):n===i&&r.push(t))}),r.sort((e,t)=>e.localeCompare(t)),n&&(r=r.map(e=>`--${e}`)),r.length>1?`\n(Did you mean one of ${r.join(", ")}?)`:1===r.length?`\n(Did you mean ${r[0]}?)`:""};const O=e.EventEmitter,C=t,E=n,k=r,A=i,{Argument:F,humanReadableArgName:x}=d,{CommanderError:$}=m,{Help:P}=w,{Option:N,splitOptionFlags:I,DualOptions:D}=v,{suggestSimilar:M}=S;function outputHelpIfRequested(e,t){e._hasHelpOption&&t.find(t=>t===e._helpLongFlag||t===e._helpShortFlag)&&(e.outputHelp(),e._exit(0,"commander.helpDisplayed","(outputHelp)"))}function incrementNodeInspectorPort(e){return e.map(e=>{if(!e.startsWith("--inspect"))return e;let t,n,r="127.0.0.1",i="9229";return null!==(n=e.match(/^(--inspect(-brk)?)$/))?t=n[1]:null!==(n=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(t=n[1],/^\d+$/.test(n[3])?i=n[3]:r=n[3]):null!==(n=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(t=n[1],r=n[3],i=n[4]),t&&"0"!==i?`${t}=${r}:${parseInt(i)+1}`:e})}y.Command=class e extends O{constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:e=>A.stdout.write(e),writeErr:e=>A.stderr.write(e),getOutHelpWidth:()=>A.stdout.isTTY?A.stdout.columns:void 0,getErrHelpWidth:()=>A.stderr.isTTY?A.stderr.columns:void 0,outputError:(e,t)=>t(e)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._hasHelpOption=e._hasHelpOption,this._helpFlags=e._helpFlags,this._helpDescription=e._helpDescription,this._helpShortFlag=e._helpShortFlag,this._helpLongFlag=e._helpLongFlag,this._helpCommandName=e._helpCommandName,this._helpCommandnameAndArgs=e._helpCommandnameAndArgs,this._helpCommandDescription=e._helpCommandDescription,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}_getCommandAndAncestors(){const e=[];for(let t=this;t;t=t.parent)e.push(t);return e}command(e,t,n){let r=t,i=n;"object"==typeof r&&null!==r&&(i=r,r=null),i=i||{};const[,o,s]=e.match(/([^ ]+) *(.*)/),a=this.createCommand(o);return r&&(a.description(r),a._executableHandler=!0),i.isDefault&&(this._defaultCommandName=a._name),a._hidden=!(!i.noHelp&&!i.hidden),a._executableFile=i.executableFile||null,s&&a.arguments(s),this.commands.push(a),a.parent=this,a.copyInheritedSettings(this),r?this:a}createCommand(t){return new e(t)}createHelp(){return Object.assign(new P,this.configureHelp())}configureHelp(e){return void 0===e?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return void 0===e?this._outputConfiguration:(Object.assign(this._outputConfiguration,e),this)}showHelpAfterError(e=!0){return"string"!=typeof e&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,t){if(!e._name)throw new Error("Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()");return(t=t||{}).isDefault&&(this._defaultCommandName=e._name),(t.noHelp||t.hidden)&&(e._hidden=!0),this.commands.push(e),e.parent=this,this}createArgument(e,t){return new F(e,t)}argument(e,t,n,r){const i=this.createArgument(e,t);return"function"==typeof n?i.default(r).argParser(n):i.default(n),this.addArgument(i),this}arguments(e){return e.trim().split(/ +/).forEach(e=>{this.argument(e)}),this}addArgument(e){const t=this.registeredArguments.slice(-1)[0];if(t&&t.variadic)throw new Error(`only the last argument can be variadic '${t.name()}'`);if(e.required&&void 0!==e.defaultValue&&void 0===e.parseArg)throw new Error(`a default value for a required argument is never used: '${e.name()}'`);return this.registeredArguments.push(e),this}addHelpCommand(e,t){return!1===e?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,"string"==typeof e&&(this._helpCommandName=e.split(" ")[0],this._helpCommandnameAndArgs=e),this._helpCommandDescription=t||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return void 0===this._addImplicitHelpCommand?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(e,t){const n=["preSubcommand","preAction","postAction"];if(!n.includes(e))throw new Error(`Unexpected value for event passed to hook : '${e}'.\nExpecting one of '${n.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(t):this._lifeCycleHooks[e]=[t],this}exitOverride(e){return this._exitCallback=e||(e=>{if("commander.executeSubCommandAsync"!==e.code)throw e}),this}_exit(e,t,n){this._exitCallback&&this._exitCallback(new $(e,t,n)),A.exit(e)}action(e){return this._actionHandler=t=>{const n=this.registeredArguments.length,r=t.slice(0,n);return this._storeOptionsAsProperties?r[n]=this:r[n]=this.opts(),r.push(this),e.apply(this,r)},this}createOption(e,t){return new N(e,t)}_callParseArg(e,t,n,r){try{return e.parseArg(t,n)}catch(e){if("commander.invalidArgument"===e.code){const t=`${r} ${e.message}`;this.error(t,{exitCode:e.exitCode,code:e.code})}throw e}}addOption(e){const t=e.name(),n=e.attributeName();if(e.negate){const t=e.long.replace(/^--no-/,"--");this._findOption(t)||this.setOptionValueWithSource(n,void 0===e.defaultValue||e.defaultValue,"default")}else void 0!==e.defaultValue&&this.setOptionValueWithSource(n,e.defaultValue,"default");this.options.push(e);const handleOptionValue=(t,r,i)=>{null==t&&void 0!==e.presetArg&&(t=e.presetArg);const o=this.getOptionValue(n);null!==t&&e.parseArg?t=this._callParseArg(e,t,o,r):null!==t&&e.variadic&&(t=e._concatValue(t,o)),null==t&&(t=!e.negate&&(!(!e.isBoolean()&&!e.optional)||"")),this.setOptionValueWithSource(n,t,i)};return this.on("option:"+t,t=>{const n=`error: option '${e.flags}' argument '${t}' is invalid.`;handleOptionValue(t,n,"cli")}),e.envVar&&this.on("optionEnv:"+t,t=>{const n=`error: option '${e.flags}' value '${t}' from env '${e.envVar}' is invalid.`;handleOptionValue(t,n,"env")}),this}_optionEx(e,t,n,r,i){if("object"==typeof t&&t instanceof N)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");const o=this.createOption(t,n);if(o.makeOptionMandatory(!!e.mandatory),"function"==typeof r)o.default(i).argParser(r);else if(r instanceof RegExp){const e=r;r=(t,n)=>{const r=e.exec(t);return r?r[0]:n},o.default(i).argParser(r)}else o.default(r);return this.addOption(o)}option(e,t,n,r){return this._optionEx({},e,t,n,r)}requiredOption(e,t,n,r){return this._optionEx({mandatory:!0},e,t,n,r)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){if(this._passThroughOptions=!!e,this.parent&&e&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(e=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this._storeOptionsAsProperties=!!e,this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,t){return this.setOptionValueWithSource(e,t,void 0)}setOptionValueWithSource(e,t,n){return this._storeOptionsAsProperties?this[e]=t:this._optionValues[e]=t,this._optionValueSources[e]=n,this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let t;return this._getCommandAndAncestors().forEach(n=>{void 0!==n.getOptionValueSource(e)&&(t=n.getOptionValueSource(e))}),t}_prepareUserArgs(e,t){if(void 0!==e&&!Array.isArray(e))throw new Error("first parameter to parse must be array or undefined");let n;switch(t=t||{},void 0===e&&(e=A.argv,A.versions&&A.versions.electron&&(t.from="electron")),this.rawArgs=e.slice(),t.from){case void 0:case"node":this._scriptPath=e[1],n=e.slice(2);break;case"electron":A.defaultApp?(this._scriptPath=e[1],n=e.slice(2)):n=e.slice(1);break;case"user":n=e.slice(0);break;default:throw new Error(`unexpected parse option { from: '${t.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",n}parse(e,t){const n=this._prepareUserArgs(e,t);return this._parseCommand([],n),this}async parseAsync(e,t){const n=this._prepareUserArgs(e,t);return await this._parseCommand([],n),this}_executeSubCommand(e,t){t=t.slice();let n=!1;const r=[".js",".ts",".tsx",".mjs",".cjs"];function findFile(e,t){const n=E.resolve(e,t);if(k.existsSync(n))return n;if(r.includes(E.extname(t)))return;const i=r.find(e=>k.existsSync(`${n}${e}`));return i?`${n}${i}`:void 0}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let i,o=e._executableFile||`${this._name}-${e._name}`,s=this._executableDir||"";if(this._scriptPath){let e;try{e=k.realpathSync(this._scriptPath)}catch(t){e=this._scriptPath}s=E.resolve(E.dirname(e),s)}if(s){let t=findFile(s,o);if(!t&&!e._executableFile&&this._scriptPath){const n=E.basename(this._scriptPath,E.extname(this._scriptPath));n!==this._name&&(t=findFile(s,`${n}-${e._name}`))}o=t||o}if(n=r.includes(E.extname(o)),"win32"!==A.platform?n?(t.unshift(o),t=incrementNodeInspectorPort(A.execArgv).concat(t),i=C.spawn(A.argv[0],t,{stdio:"inherit"})):i=C.spawn(o,t,{stdio:"inherit"}):(t.unshift(o),t=incrementNodeInspectorPort(A.execArgv).concat(t),i=C.spawn(A.execPath,t,{stdio:"inherit"})),!i.killed){["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(e=>{A.on(e,()=>{!1===i.killed&&null===i.exitCode&&i.kill(e)})})}const a=this._exitCallback;a?i.on("close",()=>{a(new $(A.exitCode||0,"commander.executeSubCommandAsync","(close)"))}):i.on("close",A.exit.bind(A)),i.on("error",t=>{if("ENOENT"===t.code){const t=s?`searched for local subcommand relative to directory '${s}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",n=`'${o}' does not exist\n - if '${e._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${t}`;throw new Error(n)}if("EACCES"===t.code)throw new Error(`'${o}' not executable`);if(a){const e=new $(1,"commander.executeSubCommandAsync","(error)");e.nestedError=t,a(e)}else A.exit(1)}),this.runningCommand=i}_dispatchSubcommand(e,t,n){const r=this._findCommand(e);let i;return r||this.help({error:!0}),i=this._chainOrCallSubCommandHook(i,r,"preSubcommand"),i=this._chainOrCall(i,()=>{if(!r._executableHandler)return r._parseCommand(t,n);this._executeSubCommand(r,t.concat(n))}),i}_dispatchHelpCommand(e){e||this.help();const t=this._findCommand(e);return t&&!t._executableHandler&&t.help(),this._dispatchSubcommand(e,[],[this._helpLongFlag||this._helpShortFlag])}_checkNumberOfArguments(){this.registeredArguments.forEach((e,t)=>{e.required&&null==this.args[t]&&this.missingArgument(e.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic||this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){const myParseArg=(e,t,n)=>{let r=t;if(null!==t&&e.parseArg){const i=`error: command-argument value '${t}' is invalid for argument '${e.name()}'.`;r=this._callParseArg(e,t,n,i)}return r};this._checkNumberOfArguments();const e=[];this.registeredArguments.forEach((t,n)=>{let r=t.defaultValue;t.variadic?n<this.args.length?(r=this.args.slice(n),t.parseArg&&(r=r.reduce((e,n)=>myParseArg(t,n,e),t.defaultValue))):void 0===r&&(r=[]):n<this.args.length&&(r=this.args[n],t.parseArg&&(r=myParseArg(t,r,t.defaultValue))),e[n]=r}),this.processedArgs=e}_chainOrCall(e,t){return e&&e.then&&"function"==typeof e.then?e.then(()=>t()):t()}_chainOrCallHooks(e,t){let n=e;const r=[];return this._getCommandAndAncestors().reverse().filter(e=>void 0!==e._lifeCycleHooks[t]).forEach(e=>{e._lifeCycleHooks[t].forEach(t=>{r.push({hookedCommand:e,callback:t})})}),"postAction"===t&&r.reverse(),r.forEach(e=>{n=this._chainOrCall(n,()=>e.callback(e.hookedCommand,this))}),n}_chainOrCallSubCommandHook(e,t,n){let r=e;return void 0!==this._lifeCycleHooks[n]&&this._lifeCycleHooks[n].forEach(e=>{r=this._chainOrCall(r,()=>e(this,t))}),r}_parseCommand(e,t){const n=this.parseOptions(t);if(this._parseOptionsEnv(),this._parseOptionsImplied(),e=e.concat(n.operands),t=n.unknown,this.args=e.concat(t),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),t);if(this._hasImplicitHelpCommand()&&e[0]===this._helpCommandName)return this._dispatchHelpCommand(e[1]);if(this._defaultCommandName)return outputHelpIfRequested(this,t),this._dispatchSubcommand(this._defaultCommandName,e,t);!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),outputHelpIfRequested(this,n.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();const checkForUnknownOptions=()=>{n.unknown.length>0&&this.unknownOption(n.unknown[0])},r=`command:${this.name()}`;if(this._actionHandler){let n;return checkForUnknownOptions(),this._processArguments(),n=this._chainOrCallHooks(n,"preAction"),n=this._chainOrCall(n,()=>this._actionHandler(this.processedArgs)),this.parent&&(n=this._chainOrCall(n,()=>{this.parent.emit(r,e,t)})),n=this._chainOrCallHooks(n,"postAction"),n}if(this.parent&&this.parent.listenerCount(r))checkForUnknownOptions(),this._processArguments(),this.parent.emit(r,e,t);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,t);this.listenerCount("command:*")?this.emit("command:*",e,t):this.commands.length?this.unknownCommand():(checkForUnknownOptions(),this._processArguments())}else this.commands.length?(checkForUnknownOptions(),this.help({error:!0})):(checkForUnknownOptions(),this._processArguments())}_findCommand(e){if(e)return this.commands.find(t=>t._name===e||t._aliases.includes(e))}_findOption(e){return this.options.find(t=>t.is(e))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach(e=>{e.options.forEach(t=>{t.mandatory&&void 0===e.getOptionValue(t.attributeName())&&e.missingMandatoryOptionValue(t)})})}_checkForConflictingLocalOptions(){const e=this.options.filter(e=>{const t=e.attributeName();return void 0!==this.getOptionValue(t)&&"default"!==this.getOptionValueSource(t)}),t=e.filter(e=>e.conflictsWith.length>0);t.forEach(t=>{const n=e.find(e=>t.conflictsWith.includes(e.attributeName()));n&&this._conflictingOption(t,n)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach(e=>{e._checkForConflictingLocalOptions()})}parseOptions(e){const t=[],n=[];let r=t;const i=e.slice();function maybeOption(e){return e.length>1&&"-"===e[0]}let o=null;for(;i.length;){const e=i.shift();if("--"===e){r===n&&r.push(e),r.push(...i);break}if(!o||maybeOption(e)){if(o=null,maybeOption(e)){const t=this._findOption(e);if(t){if(t.required){const e=i.shift();void 0===e&&this.optionMissingArgument(t),this.emit(`option:${t.name()}`,e)}else if(t.optional){let e=null;i.length>0&&!maybeOption(i[0])&&(e=i.shift()),this.emit(`option:${t.name()}`,e)}else this.emit(`option:${t.name()}`);o=t.variadic?t:null;continue}}if(e.length>2&&"-"===e[0]&&"-"!==e[1]){const t=this._findOption(`-${e[1]}`);if(t){t.required||t.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${t.name()}`,e.slice(2)):(this.emit(`option:${t.name()}`),i.unshift(`-${e.slice(2)}`));continue}}if(/^--[^=]+=/.test(e)){const t=e.indexOf("="),n=this._findOption(e.slice(0,t));if(n&&(n.required||n.optional)){this.emit(`option:${n.name()}`,e.slice(t+1));continue}}if(maybeOption(e)&&(r=n),(this._enablePositionalOptions||this._passThroughOptions)&&0===t.length&&0===n.length){if(this._findCommand(e)){t.push(e),i.length>0&&n.push(...i);break}if(e===this._helpCommandName&&this._hasImplicitHelpCommand()){t.push(e),i.length>0&&t.push(...i);break}if(this._defaultCommandName){n.push(e),i.length>0&&n.push(...i);break}}if(this._passThroughOptions){r.push(e),i.length>0&&r.push(...i);break}r.push(e)}else this.emit(`option:${o.name()}`,e)}return{operands:t,unknown:n}}opts(){if(this._storeOptionsAsProperties){const e={},t=this.options.length;for(let n=0;n<t;n++){const t=this.options[n].attributeName();e[t]=t===this._versionOptionName?this._version:this[t]}return e}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((e,t)=>Object.assign(e,t.opts()),{})}error(e,t){this._outputConfiguration.outputError(`${e}\n`,this._outputConfiguration.writeErr),"string"==typeof this._showHelpAfterError?this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`):this._showHelpAfterError&&(this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0}));const n=t||{},r=n.exitCode||1,i=n.code||"commander.error";this._exit(r,i,e)}_parseOptionsEnv(){this.options.forEach(e=>{if(e.envVar&&e.envVar in A.env){const t=e.attributeName();(void 0===this.getOptionValue(t)||["default","config","env"].includes(this.getOptionValueSource(t)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,A.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}})}_parseOptionsImplied(){const e=new D(this.options),hasCustomOptionValue=e=>void 0!==this.getOptionValue(e)&&!["default","implied"].includes(this.getOptionValueSource(e));this.options.filter(t=>void 0!==t.implied&&hasCustomOptionValue(t.attributeName())&&e.valueFromOption(this.getOptionValue(t.attributeName()),t)).forEach(e=>{Object.keys(e.implied).filter(e=>!hasCustomOptionValue(e)).forEach(t=>{this.setOptionValueWithSource(t,e.implied[t],"implied")})})}missingArgument(e){const t=`error: missing required argument '${e}'`;this.error(t,{code:"commander.missingArgument"})}optionMissingArgument(e){const t=`error: option '${e.flags}' argument missing`;this.error(t,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){const t=`error: required option '${e.flags}' not specified`;this.error(t,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,t){const findBestOptionFromValue=e=>{const t=e.attributeName(),n=this.getOptionValue(t),r=this.options.find(e=>e.negate&&t===e.attributeName()),i=this.options.find(e=>!e.negate&&t===e.attributeName());return r&&(void 0===r.presetArg&&!1===n||void 0!==r.presetArg&&n===r.presetArg)?r:i||e},getErrorMessage=e=>{const t=findBestOptionFromValue(e),n=t.attributeName();return"env"===this.getOptionValueSource(n)?`environment variable '${t.envVar}'`:`option '${t.flags}'`},n=`error: ${getErrorMessage(e)} cannot be used with ${getErrorMessage(t)}`;this.error(n,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let n=[],r=this;do{const e=r.createHelp().visibleOptions(r).filter(e=>e.long).map(e=>e.long);n=n.concat(e),r=r.parent}while(r&&!r._enablePositionalOptions);t=M(e,n)}const n=`error: unknown option '${e}'${t}`;this.error(n,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;const t=this.registeredArguments.length,n=1===t?"":"s",r=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${t} argument${n} but got ${e.length}.`;this.error(r,{code:"commander.excessArguments"})}unknownCommand(){const e=this.args[0];let t="";if(this._showSuggestionAfterError){const n=[];this.createHelp().visibleCommands(this).forEach(e=>{n.push(e.name()),e.alias()&&n.push(e.alias())}),t=M(e,n)}const n=`error: unknown command '${e}'${t}`;this.error(n,{code:"commander.unknownCommand"})}version(e,t,n){if(void 0===e)return this._version;this._version=e,t=t||"-V, --version",n=n||"output the version number";const r=this.createOption(t,n);return this._versionOptionName=r.attributeName(),this.options.push(r),this.on("option:"+r.name(),()=>{this._outputConfiguration.writeOut(`${e}\n`),this._exit(0,"commander.version",e)}),this}description(e,t){return void 0===e&&void 0===t?this._description:(this._description=e,t&&(this._argsDescription=t),this)}summary(e){return void 0===e?this._summary:(this._summary=e,this)}alias(e){if(void 0===e)return this._aliases[0];let t=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(t=this.commands[this.commands.length-1]),e===t._name)throw new Error("Command alias can't be the same as its name");return t._aliases.push(e),this}aliases(e){return void 0===e?this._aliases:(e.forEach(e=>this.alias(e)),this)}usage(e){if(void 0===e){if(this._usage)return this._usage;const e=this.registeredArguments.map(e=>x(e));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?e:[]).join(" ")}return this._usage=e,this}name(e){return void 0===e?this._name:(this._name=e,this)}nameFromFilename(e){return this._name=E.basename(e,E.extname(e)),this}executableDir(e){return void 0===e?this._executableDir:(this._executableDir=e,this)}helpInformation(e){const t=this.createHelp();return void 0===t.helpWidth&&(t.helpWidth=e&&e.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),t.formatHelp(this,t)}_getHelpContext(e){const t={error:!!(e=e||{}).error};let n;return n=t.error?e=>this._outputConfiguration.writeErr(e):e=>this._outputConfiguration.writeOut(e),t.write=e.write||n,t.command=this,t}outputHelp(e){let t;"function"==typeof e&&(t=e,e=void 0);const n=this._getHelpContext(e);this._getCommandAndAncestors().reverse().forEach(e=>e.emit("beforeAllHelp",n)),this.emit("beforeHelp",n);let r=this.helpInformation(n);if(t&&(r=t(r),"string"!=typeof r&&!Buffer.isBuffer(r)))throw new Error("outputHelp callback must return a string or a Buffer");n.write(r),this._helpLongFlag&&this.emit(this._helpLongFlag),this.emit("afterHelp",n),this._getCommandAndAncestors().forEach(e=>e.emit("afterAllHelp",n))}helpOption(e,t){if("boolean"==typeof e)return this._hasHelpOption=e,this;this._helpFlags=e||this._helpFlags,this._helpDescription=t||this._helpDescription;const n=I(this._helpFlags);return this._helpShortFlag=n.shortFlag,this._helpLongFlag=n.longFlag,this}help(e){this.outputHelp(e);let t=A.exitCode||0;0===t&&e&&"function"!=typeof e&&e.error&&(t=1),this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){const n=["beforeAll","before","after","afterAll"];if(!n.includes(e))throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${n.join("', '")}'`);const r=`${e}Help`;return this.on(r,e=>{let n;n="function"==typeof t?t({error:e.error,command:e.command}):t,n&&e.write(`${n}\n`)}),this}},function(e,t){const{Argument:n}=d,{Command:r}=y,{CommanderError:i,InvalidArgumentError:o}=m,{Help:s}=w,{Option:a}=v;(t=e.exports=new r).program=t,t.Command=r,t.Option=a,t.Argument=n,t.Help=s,t.CommanderError=i,t.InvalidArgumentError=o,t.InvalidOptionArgumentError=o}(p,p.exports);var j,T,R,L,H,V,W,q,U=p.exports,G={exports:{}};function requireConversions(){if(L)return R;L=1;const e=T?j:(T=1,j={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),t={};for(const n of Object.keys(e))t[e[n]]=n;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};R=n;for(const e of Object.keys(n)){if(!("channels"in n[e]))throw new Error("missing channels property: "+e);if(!("labels"in n[e]))throw new Error("missing channel labels property: "+e);if(n[e].labels.length!==n[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:r}=n[e];delete n[e].channels,delete n[e].labels,Object.defineProperty(n[e],"channels",{value:t}),Object.defineProperty(n[e],"labels",{value:r})}function comparativeDistance(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}return n.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=o-i;let a,c;o===i?a=0:t===o?a=(n-r)/s:n===o?a=2+(r-t)/s:r===o&&(a=4+(t-n)/s),a=Math.min(60*a,360),a<0&&(a+=360);const l=(i+o)/2;return c=o===i?0:l<=.5?s/(o+i):s/(2-o-i),[a,100*c,100*l]},n.rgb.hsv=function(e){let t,n,r,i,o;const s=e[0]/255,a=e[1]/255,c=e[2]/255,l=Math.max(s,a,c),u=l-Math.min(s,a,c),diffc=function(e){return(l-e)/6/u+.5};return 0===u?(i=0,o=0):(o=u/l,t=diffc(s),n=diffc(a),r=diffc(c),s===l?i=r-n:a===l?i=1/3+t-r:c===l&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*l]},n.rgb.hwb=function(e){const t=e[0],r=e[1];let i=e[2];const o=n.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,i));return i=1-1/255*Math.max(t,Math.max(r,i)),[o,100*s,100*i]},n.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(1-t,1-n,1-r);return[100*((1-t-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*i]},n.rgb.keyword=function(n){const r=t[n];if(r)return r;let i,o=1/0;for(const t of Object.keys(e)){const r=comparativeDistance(n,e[t]);r<o&&(o=r,i=t)}return i},n.keyword.rgb=function(t){return e[t]},n.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;return[100*(.4124*t+.3576*n+.1805*r),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},n.rgb.lab=function(e){const t=n.rgb.xyz(e);let r=t[0],i=t[1],o=t[2];r/=95.047,i/=100,o/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;return[116*i-16,500*(r-i),200*(i-o)]},n.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let i,o,s;if(0===n)return s=255*r,[s,s,s];i=r<.5?r*(1+n):r+n-r*n;const a=2*r-i,c=[0,0,0];for(let e=0;e<3;e++)o=t+1/3*-(e-1),o<0&&o++,o>1&&o--,s=6*o<1?a+6*(i-a)*o:2*o<1?i:3*o<2?a+(i-a)*(2/3-o)*6:a,c[e]=255*s;return c},n.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,i=n;const o=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o;return[t,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},n.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),s=255*r*(1-n),a=255*r*(1-n*o),c=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,c,s];case 1:return[a,r,s];case 2:return[s,r,c];case 3:return[s,a,r];case 4:return[c,s,r];case 5:return[r,s,a]}},n.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,i=Math.max(r,.01);let o,s;s=(2-n)*r;const a=(2-n)*i;return o=n*i,o/=a<=1?a:2-a,o=o||0,s/=2,[t,100*o,100*s]},n.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const i=n+r;let o;i>1&&(n/=i,r/=i);const s=Math.floor(6*t),a=1-r;o=6*t-s,1&s&&(o=1-o);const c=n+o*(a-n);let l,u,h;switch(s){default:case 6:case 0:l=a,u=c,h=n;break;case 1:l=c,u=a,h=n;break;case 2:l=n,u=a,h=c;break;case 3:l=n,u=c,h=a;break;case 4:l=c,u=n,h=a;break;case 5:l=a,u=n,h=c}return[255*l,255*u,255*h]},n.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},n.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let i,o,s;return i=3.2406*t+-1.5372*n+-.4986*r,o=-.9689*t+1.8758*n+.0415*r,s=.0557*t+-.204*n+1.057*r,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[255*i,255*o,255*s]},n.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*n-16,500*(t-n),200*(n-r)]},n.lab.xyz=function(e){let t,n,r;n=(e[0]+16)/116,t=e[1]/500+n,r=n-e[2]/200;const i=n**3,o=t**3,s=r**3;return n=i>.008856?i:(n-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,t*=95.047,n*=100,r*=108.883,[t,n,r]},n.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let i;i=360*Math.atan2(r,n)/2/Math.PI,i<0&&(i+=360);return[t,Math.sqrt(n*n+r*r),i]},n.lch.lab=function(e){const t=e[0],n=e[1],r=e[2]/360*2*Math.PI;return[t,n*Math.cos(r),n*Math.sin(r)]},n.rgb.ansi16=function(e,t=null){const[r,i,o]=e;let s=null===t?n.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),0===s)return 30;let a=30+(Math.round(o/255)<<2|Math.round(i/255)<<1|Math.round(r/255));return 2===s&&(a+=60),a},n.hsv.ansi16=function(e){return n.rgb.ansi16(n.hsv.rgb(e),e[2])},n.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];if(t===n&&n===r)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},n.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},n.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},n.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},n.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];3===t[0].length&&(n=n.split("").map(e=>e+e).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},n.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,n),r),o=Math.min(Math.min(t,n),r),s=i-o;let a,c;return a=s<1?o/(1-s):0,c=s<=0?0:i===t?(n-r)/s%6:i===n?2+(r-t)/s:4+(t-n)/s,c/=6,c%=1,[360*c,100*s,100*a]},n.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},n.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},n.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];const i=[0,0,0],o=t%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return c=(1-n)*r,[255*(n*i[0]+c),255*(n*i[1]+c),255*(n*i[2]+c)]},n.hcg.hsv=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);let r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},n.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},n.hcg.hwb=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},n.hwb.hcg=function(e){const t=e[1]/100,n=1-e[2]/100,r=n-t;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},n.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},n.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},n.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},n.gray.hsl=function(e){return[0,0,e[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(e){return[0,100,e[0]]},n.gray.cmyk=function(e){return[0,0,0,e[0]]},n.gray.lab=function(e){return[e[0],0,0]},n.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},n.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]},R}function requireRoute(){if(V)return H;V=1;const e=requireConversions();function deriveBFS(t){const n=function(){const t={},n=Object.keys(e);for(let e=n.length,r=0;r<e;r++)t[n[r]]={distance:-1,parent:null};return t}(),r=[t];for(n[t].distance=0;r.length;){const t=r.pop(),i=Object.keys(e[t]);for(let e=i.length,o=0;o<e;o++){const e=i[o],s=n[e];-1===s.distance&&(s.distance=n[t].distance+1,s.parent=t,r.unshift(e))}}return n}function link(e,t){return function(n){return t(e(n))}}function wrapConversion(t,n){const r=[n[t].parent,t];let i=e[n[t].parent][t],o=n[t].parent;for(;n[o].parent;)r.unshift(n[o].parent),i=link(e[n[o].parent][o],i),o=n[o].parent;return i.conversion=r,i}return H=function(e){const t=deriveBFS(e),n={},r=Object.keys(t);for(let e=r.length,i=0;i<e;i++){const e=r[i];null!==t[e].parent&&(n[e]=wrapConversion(e,t))}return n}}function requireColorConvert(){if(q)return W;q=1;const e=requireConversions(),t=requireRoute(),n={};return Object.keys(e).forEach(r=>{n[r]={},Object.defineProperty(n[r],"channels",{value:e[r].channels}),Object.defineProperty(n[r],"labels",{value:e[r].labels});const i=t(r);Object.keys(i).forEach(e=>{const t=i[e];n[r][e]=function(e){const wrappedFn=function(...t){const n=t[0];if(null==n)return n;n.length>1&&(t=n);const r=e(t);if("object"==typeof r)for(let e=r.length,t=0;t<e;t++)r[t]=Math.round(r[t]);return r};return"conversion"in e&&(wrappedFn.conversion=e.conversion),wrappedFn}(t),n[r][e].raw=function(e){const wrappedFn=function(...t){const n=t[0];return null==n?n:(n.length>1&&(t=n),e(t))};return"conversion"in e&&(wrappedFn.conversion=e.conversion),wrappedFn}(t)})}),W=n}!function(e){const wrapAnsi16=(e,t)=>(...n)=>`[${e(...n)+t}m`,wrapAnsi256=(e,t)=>(...n)=>{const r=e(...n);return`[${38+t};5;${r}m`},wrapAnsi16m=(e,t)=>(...n)=>{const r=e(...n);return`[${38+t};2;${r[0]};${r[1]};${r[2]}m`},ansi2ansi=e=>e,rgb2rgb=(e,t,n)=>[e,t,n],setLazyProperty=(e,t,n)=>{Object.defineProperty(e,t,{get:()=>{const r=n();return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0}),r},enumerable:!0,configurable:!0})};let t;const makeDynamicStyles=(e,n,r,i)=>{void 0===t&&(t=requireColorConvert());const o=i?10:0,s={};for(const[i,a]of Object.entries(t)){const t="ansi16"===i?"ansi":i;i===n?s[t]=e(r,o):"object"==typeof a&&(s[t]=e(a[n],o))}return s};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[n,r]of Object.entries(t)){for(const[n,i]of Object.entries(r))t[n]={open:`[${i[0]}m`,close:`[${i[1]}m`},r[n]=t[n],e.set(i[0],i[1]);Object.defineProperty(t,n,{value:r,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",setLazyProperty(t.color,"ansi",()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,!1)),setLazyProperty(t.color,"ansi256",()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,!1)),setLazyProperty(t.color,"ansi16m",()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,!1)),setLazyProperty(t.bgColor,"ansi",()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,!0)),setLazyProperty(t.bgColor,"ansi256",()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,!0)),setLazyProperty(t.bgColor,"ansi16m",()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,!0)),t}})}(G);var B=G.exports;const J=o,Y=s,hasFlag=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)},{env:K}=process;let z;function translateLevel(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function supportsColor(e,t){if(0===z)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(!t&&void 0===z)return 0;const n=z||0;if("dumb"===K.TERM)return n;if("win32"===process.platform){const e=J.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in K)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in K)||"codeship"===K.CI_NAME?1:n;if("TEAMCITY_VERSION"in K)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(K.TEAMCITY_VERSION)?1:0;if("truecolor"===K.COLORTERM)return 3;if("TERM_PROGRAM"in K){const e=parseInt((K.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(K.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(K.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(K.TERM)||"COLORTERM"in K?1:n}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")||hasFlag("color=never")?z=0:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(z=1),"FORCE_COLOR"in K&&(z="true"===K.FORCE_COLOR?1:"false"===K.FORCE_COLOR?0:0===K.FORCE_COLOR.length?1:Math.min(parseInt(K.FORCE_COLOR,10),3));var Q={stdout:translateLevel(supportsColor(0,Y.isatty(1))),stderr:translateLevel(supportsColor(0,Y.isatty(2)))};var X,Z,ee={stringReplaceAll:(e,t,n)=>{let r=e.indexOf(t);if(-1===r)return e;const i=t.length;let o=0,s="";do{s+=e.substr(o,r-o)+t+n,o=r+i,r=e.indexOf(t,o)}while(-1!==r);return s+=e.substr(o),s},stringEncaseCRLFWithFirstIndex:(e,t,n,r)=>{let i=0,o="";do{const s="\r"===e[r-1];o+=e.substr(i,(s?r-1:r)-i)+t+(s?"\r\n":"\n")+n,i=r+1,r=e.indexOf("\n",i)}while(-1!==r);return o+=e.substr(i),o}};const te=B,{stdout:ne,stderr:re}=Q,{stringReplaceAll:ie,stringEncaseCRLFWithFirstIndex:oe}=ee,{isArray:se}=Array,ae=["ansi","ansi","ansi256","ansi16m"],ce=Object.create(null);class le{constructor(e){return chalkFactory(e)}}const chalkFactory=e=>{const t={};return((e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=ne?ne.level:0;e.level=void 0===t.level?n:t.level})(t,e),t.template=(...e)=>chalkTag(t.template,...e),Object.setPrototypeOf(t,Chalk.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=le,t.template};function Chalk(e){return chalkFactory(e)}for(const[e,t]of Object.entries(te))ce[e]={get(){const n=createBuilder(this,createStyler(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:n}),n}};ce.visible={get(){const e=createBuilder(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};const ue=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const e of ue)ce[e]={get(){const{level:t}=this;return function(...n){const r=createStyler(te.color[ae[t]][e](...n),te.color.close,this._styler);return createBuilder(this,r,this._isEmpty)}}};for(const e of ue){ce["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const{level:t}=this;return function(...n){const r=createStyler(te.bgColor[ae[t]][e](...n),te.bgColor.close,this._styler);return createBuilder(this,r,this._isEmpty)}}}}const he=Object.defineProperties(()=>{},{...ce,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),createStyler=(e,t,n)=>{let r,i;return void 0===n?(r=e,i=t):(r=n.openAll+e,i=t+n.closeAll),{open:e,close:t,openAll:r,closeAll:i,parent:n}},createBuilder=(e,t,n)=>{const builder=(...e)=>se(e[0])&&se(e[0].raw)?applyStyle(builder,chalkTag(builder,...e)):applyStyle(builder,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(builder,he),builder._generator=e,builder._styler=t,builder._isEmpty=n,builder},applyStyle=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let n=e._styler;if(void 0===n)return t;const{openAll:r,closeAll:i}=n;if(-1!==t.indexOf(""))for(;void 0!==n;)t=ie(t,n.close,n.open),n=n.parent;const o=t.indexOf("\n");return-1!==o&&(t=oe(t,i,r,o)),r+t+i};let pe;const chalkTag=(e,...t)=>{const[n]=t;if(!se(n)||!se(n.raw))return t.join(" ");const r=t.slice(1),i=[n.raw[0]];for(let e=1;e<n.length;e++)i.push(String(r[e-1]).replace(/[{}\\]/g,"\\$&"),String(n.raw[e]));return void 0===pe&&(pe=function(){if(Z)return X;Z=1;const e=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,t=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,r=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,i=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function unescape(e){const t="u"===e[0],n="{"===e[1];return t&&!n&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):t&&n?String.fromCodePoint(parseInt(e.slice(2,-1),16)):i.get(e)||e}function parseArguments(e,t){const i=[],o=t.trim().split(/\s*,\s*/g);let s;for(const t of o){const o=Number(t);if(Number.isNaN(o)){if(!(s=t.match(n)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);i.push(s[2].replace(r,(e,t,n)=>t?unescape(t):n))}else i.push(o)}return i}function parseStyle(e){t.lastIndex=0;const n=[];let r;for(;null!==(r=t.exec(e));){const e=r[1];if(r[2]){const t=parseArguments(e,r[2]);n.push([e].concat(t))}else n.push([e])}return n}function buildStyle(e,t){const n={};for(const e of t)for(const t of e.styles)n[t[0]]=e.inverse?null:t.slice(1);let r=e;for(const[e,t]of Object.entries(n))if(Array.isArray(t)){if(!(e in r))throw new Error(`Unknown Chalk style: ${e}`);r=t.length>0?r[e](...t):r[e]}return r}return X=(t,n)=>{const r=[],i=[];let o=[];if(n.replace(e,(e,n,s,a,c,l)=>{if(n)o.push(unescape(n));else if(a){const e=o.join("");o=[],i.push(0===r.length?e:buildStyle(t,r)(e)),r.push({inverse:s,styles:parseStyle(a)})}else if(c){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");i.push(buildStyle(t,r)(o.join(""))),o=[],r.pop()}else o.push(l)}),i.push(o.join("")),r.length>0){const e=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(e)}return i.join("")},X}()),pe(e,i.join(""))};Object.defineProperties(Chalk.prototype,ce);const de=Chalk();de.supportsColor=ne,de.stderr=Chalk({level:re?re.level:0}),de.stderr.supportsColor=re;var me=de,fe={name:"@4xian/ccapi",version:"1.0.1",description:"Claude Code settings.json中key自动配置工具，方便API_KEY、AUTH_TOKEN配置切换"};const ge=me,ye=fe;var version=function(){console.log(ge.blue(`${ye.name} v${ye.version}`)),console.log(ge.gray(ye.description))},we={},be={fromCallback:function(e){return Object.defineProperty(function(...t){if("function"!=typeof t[t.length-1])return new Promise((n,r)=>{t.push((e,t)=>null!=e?r(e):n(t)),e.apply(this,t)});e.apply(this,t)},"name",{value:e.name})},fromPromise:function(e){return Object.defineProperty(function(...t){const n=t[t.length-1];if("function"!=typeof n)return e.apply(this,t);t.pop(),e.apply(this,t).then(e=>n(null,e),n)},"name",{value:e.name})}},ve=a,_e=process.cwd,Se=null,Oe=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Se||(Se=_e.call(process)),Se};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var Ce=process.chdir;process.chdir=function(e){Se=null,Ce.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ce)}var polyfills$1=function(e){ve.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,r){e.open(t,ve.O_WRONLY|ve.O_SYMLINK,n,function(t,i){t?r&&r(t):e.fchmod(i,n,function(t){e.close(i,function(e){r&&r(t||e)})})})},e.lchmodSync=function(t,n){var r,i=e.openSync(t,ve.O_WRONLY|ve.O_SYMLINK,n),o=!0;try{r=e.fchmodSync(i,n),o=!1}finally{if(o)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return r}}(e);e.lutimes||function(e){ve.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,n,r,i){e.open(t,ve.O_SYMLINK,function(t,o){t?i&&i(t):e.futimes(o,n,r,function(t){e.close(o,function(e){i&&i(t||e)})})})},e.lutimesSync=function(t,n,r){var i,o=e.openSync(t,ve.O_SYMLINK),s=!0;try{i=e.futimesSync(o,n,r),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}):e.futimes&&(e.lutimes=function(e,t,n,r){r&&process.nextTick(r)},e.lutimesSync=function(){})}(e);e.chown=chownFix(e.chown),e.fchown=chownFix(e.fchown),e.lchown=chownFix(e.lchown),e.chmod=chmodFix(e.chmod),e.fchmod=chmodFix(e.fchmod),e.lchmod=chmodFix(e.lchmod),e.chownSync=chownFixSync(e.chownSync),e.fchownSync=chownFixSync(e.fchownSync),e.lchownSync=chownFixSync(e.lchownSync),e.chmodSync=chmodFixSync(e.chmodSync),e.fchmodSync=chmodFixSync(e.fchmodSync),e.lchmodSync=chmodFixSync(e.lchmodSync),e.stat=statFix(e.stat),e.fstat=statFix(e.fstat),e.lstat=statFix(e.lstat),e.statSync=statFixSync(e.statSync),e.fstatSync=statFixSync(e.fstatSync),e.lstatSync=statFixSync(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){});e.chown&&!e.lchown&&(e.lchown=function(e,t,n,r){r&&process.nextTick(r)},e.lchownSync=function(){});"win32"===Oe&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function rename(n,r,i){var o=Date.now(),s=0;t(n,r,function CB(a){if(a&&("EACCES"===a.code||"EPERM"===a.code||"EBUSY"===a.code)&&Date.now()-o<6e4)return setTimeout(function(){e.stat(r,function(e,o){e&&"ENOENT"===e.code?t(n,r,CB):i(a)})},s),void(s<100&&(s+=10));i&&i(a)})}return Object.setPrototypeOf&&Object.setPrototypeOf(rename,t),rename}(e.rename));function chmodFix(t){return t?function(n,r,i){return t.call(e,n,r,function(e){chownErOk(e)&&(e=null),i&&i.apply(this,arguments)})}:t}function chmodFixSync(t){return t?function(n,r){try{return t.call(e,n,r)}catch(e){if(!chownErOk(e))throw e}}:t}function chownFix(t){return t?function(n,r,i,o){return t.call(e,n,r,i,function(e){chownErOk(e)&&(e=null),o&&o.apply(this,arguments)})}:t}function chownFixSync(t){return t?function(n,r,i){try{return t.call(e,n,r,i)}catch(e){if(!chownErOk(e))throw e}}:t}function statFix(t){return t?function(n,r,i){function callback(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof r&&(i=r,r=null),r?t.call(e,n,r,callback):t.call(e,n,callback)}:t}function statFixSync(t){return t?function(n,r){var i=r?t.call(e,n,r):t.call(e,n);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:t}function chownErOk(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read="function"!=typeof e.read?e.read:function(t){function read(n,r,i,o,s,a){var c;if(a&&"function"==typeof a){var l=0;c=function(u,h,p){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,n,r,i,o,s,c);a.apply(this,arguments)}}return t.call(e,n,r,i,o,s,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(read,t),read}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(t=e.readSync,function(n,r,i,o,s){for(var a=0;;)try{return t.call(e,n,r,i,o,s)}catch(e){if("EAGAIN"===e.code&&a<10){a++;continue}throw e}});var t};var Ee=c.Stream,legacyStreams=function(e){return{ReadStream:function ReadStream(t,n){if(!(this instanceof ReadStream))return new ReadStream(t,n);Ee.call(this);var r=this;this.path=t,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,n=n||{};for(var i=Object.keys(n),o=0,s=i.length;o<s;o++){var a=i[o];this[a]=n[a]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){r._read()});e.open(this.path,this.flags,this.mode,function(e,t){if(e)return r.emit("error",e),void(r.readable=!1);r.fd=t,r.emit("open",t),r._read()})},WriteStream:function WriteStream(t,n){if(!(this instanceof WriteStream))return new WriteStream(t,n);Ee.call(this),this.path=t,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var r=Object.keys(n),i=0,o=r.length;i<o;i++){var s=r[i];this[s]=n[s]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var clone_1=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:ke(e)};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t},ke=Object.getPrototypeOf||function(e){return e.__proto__};var Ae,Fe,xe=r,$e=polyfills$1,Pe=legacyStreams,Ne=clone_1,Ie=l;function publishQueue(e,t){Object.defineProperty(e,Ae,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(Ae=Symbol.for("graceful-fs.queue"),Fe=Symbol.for("graceful-fs.previous")):(Ae="___graceful-fs.queue",Fe="___graceful-fs.previous");var debug=function(){};if(Ie.debuglog?debug=Ie.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(debug=function(){var e=Ie.format.apply(Ie,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!xe[Ae]){var De=h[Ae]||[];publishQueue(xe,De),xe.close=function(e){function close(t,n){return e.call(xe,t,function(e){e||resetQueue(),"function"==typeof n&&n.apply(this,arguments)})}return Object.defineProperty(close,Fe,{value:e}),close}(xe.close),xe.closeSync=function(e){function closeSync(t){e.apply(xe,arguments),resetQueue()}return Object.defineProperty(closeSync,Fe,{value:e}),closeSync}(xe.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){debug(xe[Ae]),u.equal(xe[Ae].length,0)})}h[Ae]||publishQueue(h,xe[Ae]);var Me,je=patch(Ne(xe));function patch(e){$e(e),e.gracefulify=patch,e.createReadStream=function(t,n){return new e.ReadStream(t,n)},e.createWriteStream=function(t,n){return new e.WriteStream(t,n)};var t=e.readFile;e.readFile=function(e,n,r){"function"==typeof n&&(r=n,n=null);return function go$readFile(e,n,r,i){return t(e,n,function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof r&&r.apply(this,arguments):enqueue([go$readFile,[e,n,r],t,i||Date.now(),Date.now()])})}(e,n,r)};var n=e.writeFile;e.writeFile=function(e,t,r,i){"function"==typeof r&&(i=r,r=null);return function go$writeFile(e,t,r,i,o){return n(e,t,r,function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):enqueue([go$writeFile,[e,t,r,i],n,o||Date.now(),Date.now()])})}(e,t,r,i)};var r=e.appendFile;r&&(e.appendFile=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);return function go$appendFile(e,t,n,i,o){return r(e,t,n,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof i&&i.apply(this,arguments):enqueue([go$appendFile,[e,t,n,i],r,o||Date.now(),Date.now()])})}(e,t,n,i)});var i=e.copyFile;i&&(e.copyFile=function(e,t,n,r){"function"==typeof n&&(r=n,n=0);return function go$copyFile(e,t,n,r,o){return i(e,t,n,function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof r&&r.apply(this,arguments):enqueue([go$copyFile,[e,t,n,r],i,o||Date.now(),Date.now()])})}(e,t,n,r)});var o=e.readdir;e.readdir=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r=s.test(process.version)?function(e,t,n,r){return o(e,fs$readdirCallback(e,t,n,r))}:function(e,t,n,r){return o(e,t,fs$readdirCallback(e,t,n,r))};return r(e,t,n);function fs$readdirCallback(e,t,n,i){return function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(s&&s.sort&&s.sort(),"function"==typeof n&&n.call(this,o,s)):enqueue([r,[e,t,n],o,i||Date.now(),Date.now()])}}};var s=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var a=Pe(e);ReadStream=a.ReadStream,WriteStream=a.WriteStream}var c=e.ReadStream;c&&(ReadStream.prototype=Object.create(c.prototype),ReadStream.prototype.open=function(){var e=this;open(e.path,e.flags,e.mode,function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())})});var l=e.WriteStream;l&&(WriteStream.prototype=Object.create(l.prototype),WriteStream.prototype.open=function(){var e=this;open(e.path,e.flags,e.mode,function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))})}),Object.defineProperty(e,"ReadStream",{get:function(){return ReadStream},set:function(e){ReadStream=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return WriteStream},set:function(e){WriteStream=e},enumerable:!0,configurable:!0});var u=ReadStream;Object.defineProperty(e,"FileReadStream",{get:function(){return u},set:function(e){u=e},enumerable:!0,configurable:!0});var h=WriteStream;function ReadStream(e,t){return this instanceof ReadStream?(c.apply(this,arguments),this):ReadStream.apply(Object.create(ReadStream.prototype),arguments)}function WriteStream(e,t){return this instanceof WriteStream?(l.apply(this,arguments),this):WriteStream.apply(Object.create(WriteStream.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0});var p=e.open;function open(e,t,n,r){return"function"==typeof n&&(r=n,n=null),function go$open(e,t,n,r,i){return p(e,t,n,function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof r&&r.apply(this,arguments):enqueue([go$open,[e,t,n,r],o,i||Date.now(),Date.now()])})}(e,t,n,r)}return e.open=open,e}function enqueue(e){debug("ENQUEUE",e[0].name,e[1]),xe[Ae].push(e),retry()}function resetQueue(){for(var e=Date.now(),t=0;t<xe[Ae].length;++t)xe[Ae][t].length>2&&(xe[Ae][t][3]=e,xe[Ae][t][4]=e);retry()}function retry(){if(clearTimeout(Me),Me=void 0,0!==xe[Ae].length){var e=xe[Ae].shift(),t=e[0],n=e[1],r=e[2],i=e[3],o=e[4];if(void 0===i)debug("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-i>=6e4){debug("TIMEOUT",t.name,n);var s=n.pop();"function"==typeof s&&s.call(null,r)}else{var a=Date.now()-o,c=Math.max(o-i,1);a>=Math.min(1.2*c,100)?(debug("RETRY",t.name,n),t.apply(null,n.concat([i]))):xe[Ae].push(e)}void 0===Me&&(Me=setTimeout(retry,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!xe.__patched&&(je=patch(xe),xe.__patched=!0),function(e){const t=be.fromCallback,n=je,r=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof n[e]);Object.assign(e,n),r.forEach(r=>{e[r]=t(n[r])}),e.exists=function(e,t){return"function"==typeof t?n.exists(e,t):new Promise(t=>n.exists(e,t))},e.read=function(e,t,r,i,o,s){return"function"==typeof s?n.read(e,t,r,i,o,s):new Promise((s,a)=>{n.read(e,t,r,i,o,(e,t,n)=>{if(e)return a(e);s({bytesRead:t,buffer:n})})})},e.write=function(e,t,...r){return"function"==typeof r[r.length-1]?n.write(e,t,...r):new Promise((i,o)=>{n.write(e,t,...r,(e,t,n)=>{if(e)return o(e);i({bytesWritten:t,buffer:n})})})},e.readv=function(e,t,...r){return"function"==typeof r[r.length-1]?n.readv(e,t,...r):new Promise((i,o)=>{n.readv(e,t,...r,(e,t,n)=>{if(e)return o(e);i({bytesRead:t,buffers:n})})})},e.writev=function(e,t,...r){return"function"==typeof r[r.length-1]?n.writev(e,t,...r):new Promise((i,o)=>{n.writev(e,t,...r,(e,t,n)=>{if(e)return o(e);i({bytesWritten:t,buffers:n})})})},"function"==typeof n.realpath.native?e.realpath.native=t(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(we);var Te={},Re={};const Le=n;Re.checkPath=function(e){if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(Le.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}};const He=we,{checkPath:Ve}=Re,getMode=e=>"number"==typeof e?e:{mode:511,...e}.mode;Te.makeDir=async(e,t)=>(Ve(e),He.mkdir(e,{mode:getMode(t),recursive:!0})),Te.makeDirSync=(e,t)=>(Ve(e),He.mkdirSync(e,{mode:getMode(t),recursive:!0}));const We=be.fromPromise,{makeDir:qe,makeDirSync:Ue}=Te,Ge=We(qe);var Be={mkdirs:Ge,mkdirsSync:Ue,mkdirp:Ge,mkdirpSync:Ue,ensureDir:Ge,ensureDirSync:Ue};const Je=be.fromPromise,Ye=we;var Ke={pathExists:Je(function(e){return Ye.access(e).then(()=>!0).catch(()=>!1)}),pathExistsSync:Ye.existsSync};const ze=we;var Qe={utimesMillis:(0,be.fromPromise)(async function(e,t,n){const r=await ze.open(e,"r+");let i=null;try{await ze.futimes(r,t,n)}finally{try{await ze.close(r)}catch(e){i=e}}if(i)throw i}),utimesMillisSync:function(e,t,n){const r=ze.openSync(e,"r+");return ze.futimesSync(r,t,n),ze.closeSync(r)}};const Xe=we,Ze=n,et=be.fromPromise;function areIdentical$2(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function isSrcSubdir(e,t){const n=Ze.resolve(e).split(Ze.sep).filter(e=>e),r=Ze.resolve(t).split(Ze.sep).filter(e=>e);return n.every((e,t)=>r[t]===e)}function errMsg(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}var tt={checkPaths:et(async function(e,t,n,r){const{srcStat:i,destStat:o}=await function(e,t,n){const r=n.dereference?e=>Xe.stat(e,{bigint:!0}):e=>Xe.lstat(e,{bigint:!0});return Promise.all([r(e),r(t).catch(e=>{if("ENOENT"===e.code)return null;throw e})]).then(([e,t])=>({srcStat:e,destStat:t}))}(e,t,r);if(o){if(areIdentical$2(i,o)){const r=Ze.basename(e),s=Ze.basename(t);if("move"===n&&r!==s&&r.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&isSrcSubdir(e,t))throw new Error(errMsg(e,t,n));return{srcStat:i,destStat:o}}),checkPathsSync:function(e,t,n,r){const{srcStat:i,destStat:o}=function(e,t,n){let r;const i=n.dereference?e=>Xe.statSync(e,{bigint:!0}):e=>Xe.lstatSync(e,{bigint:!0}),o=i(e);try{r=i(t)}catch(e){if("ENOENT"===e.code)return{srcStat:o,destStat:null};throw e}return{srcStat:o,destStat:r}}(e,t,r);if(o){if(areIdentical$2(i,o)){const r=Ze.basename(e),s=Ze.basename(t);if("move"===n&&r!==s&&r.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&isSrcSubdir(e,t))throw new Error(errMsg(e,t,n));return{srcStat:i,destStat:o}},checkParentPaths:et(async function checkParentPaths(e,t,n,r){const i=Ze.resolve(Ze.dirname(e)),o=Ze.resolve(Ze.dirname(n));if(o===i||o===Ze.parse(o).root)return;let s;try{s=await Xe.stat(o,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(areIdentical$2(t,s))throw new Error(errMsg(e,n,r));return checkParentPaths(e,t,o,r)}),checkParentPathsSync:function checkParentPathsSync(e,t,n,r){const i=Ze.resolve(Ze.dirname(e)),o=Ze.resolve(Ze.dirname(n));if(o===i||o===Ze.parse(o).root)return;let s;try{s=Xe.statSync(o,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(areIdentical$2(t,s))throw new Error(errMsg(e,n,r));return checkParentPathsSync(e,t,o,r)},isSrcSubdir:isSrcSubdir,areIdentical:areIdentical$2};const nt=we,rt=n,{mkdirs:it}=Be,{pathExists:ot}=Ke,{utimesMillis:st}=Qe,at=tt;async function runFilter(e,t,n){return!n.filter||n.filter(e,t)}async function getStatsAndPerformCopy(e,t,n,r){const i=r.dereference?nt.stat:nt.lstat,o=await i(t);if(o.isDirectory())return async function(e,t,n,r,i){t||await nt.mkdir(r);const o=[];for await(const e of await nt.opendir(n)){const t=rt.join(n,e.name),s=rt.join(r,e.name);o.push(runFilter(t,s,i).then(e=>{if(e)return at.checkPaths(t,s,"copy",i).then(({destStat:e})=>getStatsAndPerformCopy(e,t,s,i))}))}await Promise.all(o),t||await nt.chmod(r,e.mode)}(o,e,t,n,r);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return async function(e,t,n,r,i){if(!t)return copyFile$1(e,n,r,i);if(i.overwrite)return await nt.unlink(r),copyFile$1(e,n,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}(o,e,t,n,r);if(o.isSymbolicLink())return async function(e,t,n,r){let i=await nt.readlink(t);r.dereference&&(i=rt.resolve(process.cwd(),i));if(!e)return nt.symlink(i,n);let o=null;try{o=await nt.readlink(n)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return nt.symlink(i,n);throw e}r.dereference&&(o=rt.resolve(process.cwd(),o));if(at.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(at.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return await nt.unlink(n),nt.symlink(i,n)}(e,t,n,r);if(o.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(o.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}async function copyFile$1(e,t,n,r){if(await nt.copyFile(t,n),r.preserveTimestamps){128&e.mode||await function(e,t){return nt.chmod(e,128|t)}(n,e.mode);const r=await nt.stat(t);await st(n,r.atime,r.mtime)}return nt.chmod(n,e.mode)}var copy_1=async function(e,t,n={}){"function"==typeof n&&(n={filter:n}),n.clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:r,destStat:i}=await at.checkPaths(e,t,"copy",n);if(await at.checkParentPaths(e,r,t,"copy"),!await runFilter(e,t,n))return;const o=rt.dirname(t);await ot(o)||await it(o),await getStatsAndPerformCopy(i,e,t,n)};const ct=je,lt=n,ut=Be.mkdirsSync,ht=Qe.utimesMillisSync,pt=tt;function getStats(e,t,n,r){const i=(r.dereference?ct.statSync:ct.lstatSync)(t);if(i.isDirectory())return function(e,t,n,r,i){return t?copyDir(n,r,i):function(e,t,n,r){return ct.mkdirSync(n),copyDir(t,n,r),setDestMode(n,e)}(e.mode,n,r,i)}(i,e,t,n,r);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return function(e,t,n,r,i){return t?function(e,t,n,r){if(r.overwrite)return ct.unlinkSync(n),copyFile(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}(e,n,r,i):copyFile(e,n,r,i)}(i,e,t,n,r);if(i.isSymbolicLink())return function(e,t,n,r){let i=ct.readlinkSync(t);r.dereference&&(i=lt.resolve(process.cwd(),i));if(e){let e;try{e=ct.readlinkSync(n)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return ct.symlinkSync(i,n);throw e}if(r.dereference&&(e=lt.resolve(process.cwd(),e)),pt.isSrcSubdir(i,e))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${e}'.`);if(pt.isSrcSubdir(e,i))throw new Error(`Cannot overwrite '${e}' with '${i}'.`);return function(e,t){return ct.unlinkSync(t),ct.symlinkSync(e,t)}(i,n)}return ct.symlinkSync(i,n)}(e,t,n,r);if(i.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(i.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function copyFile(e,t,n,r){return ct.copyFileSync(t,n),r.preserveTimestamps&&function(e,t,n){(function(e){return!(128&e)})(e)&&function(e,t){setDestMode(e,128|t)}(n,e);(function(e,t){const n=ct.statSync(e);ht(t,n.atime,n.mtime)})(t,n)}(e.mode,t,n),setDestMode(n,e.mode)}function setDestMode(e,t){return ct.chmodSync(e,t)}function copyDir(e,t,n){const r=ct.opendirSync(e);try{let i;for(;null!==(i=r.readSync());)copyDirItem(i.name,e,t,n)}finally{r.closeSync()}}function copyDirItem(e,t,n,r){const i=lt.join(t,e),o=lt.join(n,e);if(r.filter&&!r.filter(i,o))return;const{destStat:s}=pt.checkPathsSync(i,o,"copy",r);return getStats(s,i,o,r)}var copySync_1=function(e,t,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:r,destStat:i}=pt.checkPathsSync(e,t,"copy",n);if(pt.checkParentPathsSync(e,r,t,"copy"),n.filter&&!n.filter(e,t))return;const o=lt.dirname(t);return ct.existsSync(o)||ut(o),getStats(i,e,t,n)};var dt={copy:(0,be.fromPromise)(copy_1),copySync:copySync_1};const mt=je;var ft={remove:(0,be.fromCallback)(function(e,t){mt.rm(e,{recursive:!0,force:!0},t)}),removeSync:function(e){mt.rmSync(e,{recursive:!0,force:!0})}};const gt=be.fromPromise,yt=we,wt=n,bt=Be,vt=ft,_t=gt(async function(e){let t;try{t=await yt.readdir(e)}catch{return bt.mkdirs(e)}return Promise.all(t.map(t=>vt.remove(wt.join(e,t))))});function emptyDirSync(e){let t;try{t=yt.readdirSync(e)}catch{return bt.mkdirsSync(e)}t.forEach(t=>{t=wt.join(e,t),vt.removeSync(t)})}var St={emptyDirSync:emptyDirSync,emptydirSync:emptyDirSync,emptyDir:_t,emptydir:_t};const Ot=be.fromPromise,Ct=n,Et=we,kt=Be;var At={createFile:Ot(async function(e){let t;try{t=await Et.stat(e)}catch{}if(t&&t.isFile())return;const n=Ct.dirname(e);let r=null;try{r=await Et.stat(n)}catch(t){if("ENOENT"===t.code)return await kt.mkdirs(n),void await Et.writeFile(e,"");throw t}r.isDirectory()?await Et.writeFile(e,""):await Et.readdir(n)}),createFileSync:function(e){let t;try{t=Et.statSync(e)}catch{}if(t&&t.isFile())return;const n=Ct.dirname(e);try{Et.statSync(n).isDirectory()||Et.readdirSync(n)}catch(e){if(!e||"ENOENT"!==e.code)throw e;kt.mkdirsSync(n)}Et.writeFileSync(e,"")}};const Ft=be.fromPromise,xt=n,$t=we,Pt=Be,{pathExists:Nt}=Ke,{areIdentical:It}=tt;var Dt={createLink:Ft(async function(e,t){let n,r;try{n=await $t.lstat(t)}catch{}try{r=await $t.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}if(n&&It(r,n))return;const i=xt.dirname(t);await Nt(i)||await Pt.mkdirs(i),await $t.link(e,t)}),createLinkSync:function(e,t){let n;try{n=$t.lstatSync(t)}catch{}try{const t=$t.lstatSync(e);if(n&&It(t,n))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const r=xt.dirname(t);return $t.existsSync(r)||Pt.mkdirsSync(r),$t.linkSync(e,t)}};const Mt=n,jt=we,{pathExists:Tt}=Ke;var Rt={symlinkPaths:(0,be.fromPromise)(async function(e,t){if(Mt.isAbsolute(e)){try{await jt.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:e}}const n=Mt.dirname(t),r=Mt.join(n,e);if(await Tt(r))return{toCwd:r,toDst:e};try{await jt.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:Mt.relative(n,e)}}),symlinkPathsSync:function(e,t){if(Mt.isAbsolute(e)){if(!jt.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}const n=Mt.dirname(t),r=Mt.join(n,e);if(jt.existsSync(r))return{toCwd:r,toDst:e};if(!jt.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Mt.relative(n,e)}}};const Lt=we;var Ht={symlinkType:(0,be.fromPromise)(async function(e,t){if(t)return t;let n;try{n=await Lt.lstat(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}),symlinkTypeSync:function(e,t){if(t)return t;let n;try{n=Lt.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}};const Vt=be.fromPromise,Wt=n,qt=we,{mkdirs:Ut,mkdirsSync:Gt}=Be,{symlinkPaths:Bt,symlinkPathsSync:Jt}=Rt,{symlinkType:Yt,symlinkTypeSync:Kt}=Ht,{pathExists:zt}=Ke,{areIdentical:Qt}=tt;var Xt={createSymlink:Vt(async function(e,t,n){let r;try{r=await qt.lstat(t)}catch{}if(r&&r.isSymbolicLink()){const[n,r]=await Promise.all([qt.stat(e),qt.stat(t)]);if(Qt(n,r))return}const i=await Bt(e,t);e=i.toDst;const o=await Yt(i.toCwd,n),s=Wt.dirname(t);return await zt(s)||await Ut(s),qt.symlink(e,t,o)}),createSymlinkSync:function(e,t,n){let r;try{r=qt.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){const n=qt.statSync(e),r=qt.statSync(t);if(Qt(n,r))return}const i=Jt(e,t);e=i.toDst,n=Kt(i.toCwd,n);const o=Wt.dirname(t);return qt.existsSync(o)||Gt(o),qt.symlinkSync(e,t,n)}};const{createFile:Zt,createFileSync:en}=At,{createLink:tn,createLinkSync:nn}=Dt,{createSymlink:rn,createSymlinkSync:on}=Xt;var sn={createFile:Zt,createFileSync:en,ensureFile:Zt,ensureFileSync:en,createLink:tn,createLinkSync:nn,ensureLink:tn,ensureLinkSync:nn,createSymlink:rn,createSymlinkSync:on,ensureSymlink:rn,ensureSymlinkSync:on};var an={stringify:function(e,{EOL:t="\n",finalEOL:n=!0,replacer:r=null,spaces:i}={}){const o=n?t:"";return JSON.stringify(e,r,i).replace(/\n/g,t)+o},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}};let cn;try{cn=je}catch(e){cn=r}const ln=be,{stringify:un,stripBom:hn}=an;const pn=ln.fromPromise(async function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||cn,r=!("throws"in t)||t.throws;let i,o=await ln.fromCallback(n.readFile)(e,t);o=hn(o);try{i=JSON.parse(o,t?t.reviver:null)}catch(t){if(r)throw t.message=`${e}: ${t.message}`,t;return null}return i});const dn=ln.fromPromise(async function(e,t,n={}){const r=n.fs||cn,i=un(t,n);await ln.fromCallback(r.writeFile)(e,i,n)});const mn={readFile:pn,readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||cn,r=!("throws"in t)||t.throws;try{let r=n.readFileSync(e,t);return r=hn(r),JSON.parse(r,t.reviver)}catch(t){if(r)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:dn,writeFileSync:function(e,t,n={}){const r=n.fs||cn,i=un(t,n);return r.writeFileSync(e,i,n)}};var fn={readJson:mn.readFile,readJsonSync:mn.readFileSync,writeJson:mn.writeFile,writeJsonSync:mn.writeFileSync};const gn=be.fromPromise,yn=we,wn=n,bn=Be,vn=Ke.pathExists;var _n={outputFile:gn(async function(e,t,n="utf-8"){const r=wn.dirname(e);return await vn(r)||await bn.mkdirs(r),yn.writeFile(e,t,n)}),outputFileSync:function(e,...t){const n=wn.dirname(e);yn.existsSync(n)||bn.mkdirsSync(n),yn.writeFileSync(e,...t)}};const{stringify:Sn}=an,{outputFile:On}=_n;var outputJson_1=async function(e,t,n={}){const r=Sn(t,n);await On(e,r,n)};const{stringify:Cn}=an,{outputFileSync:En}=_n;var outputJsonSync_1=function(e,t,n){const r=Cn(t,n);En(e,r,n)};const kn=be.fromPromise,An=fn;An.outputJson=kn(outputJson_1),An.outputJsonSync=outputJsonSync_1,An.outputJSON=An.outputJson,An.outputJSONSync=An.outputJsonSync,An.writeJSON=An.writeJson,An.writeJSONSync=An.writeJsonSync,An.readJSON=An.readJson,An.readJSONSync=An.readJsonSync;var Fn=An;const xn=we,$n=n,{copy:Pn}=dt,{remove:Nn}=ft,{mkdirp:In}=Be,{pathExists:Dn}=Ke,Mn=tt;var move_1=async function(e,t,n={}){const r=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:o=!1}=await Mn.checkPaths(e,t,"move",n);await Mn.checkParentPaths(e,i,t,"move");const s=$n.dirname(t);return $n.parse(s).root!==s&&await In(s),async function(e,t,n,r){if(!r)if(n)await Nn(t);else if(await Dn(t))throw new Error("dest already exists.");try{await xn.rename(e,t)}catch(r){if("EXDEV"!==r.code)throw r;await async function(e,t,n){const r={overwrite:n,errorOnExist:!0,preserveTimestamps:!0};return await Pn(e,t,r),Nn(e)}(e,t,n)}}(e,t,r,o)};const jn=je,Tn=n,Rn=dt.copySync,Ln=ft.removeSync,Hn=Be.mkdirpSync,Vn=tt;function rename(e,t,n){try{jn.renameSync(e,t)}catch(r){if("EXDEV"!==r.code)throw r;return function(e,t,n){const r={overwrite:n,errorOnExist:!0,preserveTimestamps:!0};return Rn(e,t,r),Ln(e)}(e,t,n)}}var moveSync_1=function(e,t,n){const r=(n=n||{}).overwrite||n.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Vn.checkPathsSync(e,t,"move",n);return Vn.checkParentPathsSync(e,i,t,"move"),function(e){const t=Tn.dirname(e);return Tn.parse(t).root===t}(t)||Hn(Tn.dirname(t)),function(e,t,n,r){if(r)return rename(e,t,n);if(n)return Ln(t),rename(e,t,n);if(jn.existsSync(t))throw new Error("dest already exists.");return rename(e,t,n)}(e,t,r,o)};var Wn={move:(0,be.fromPromise)(move_1),moveSync:moveSync_1},qn={...we,...dt,...St,...sn,...Fn,...Be,...Wn,..._n,...Ke,...ft};const Un=o;var Gn={CONFIG_FILE:n.join(Un.homedir(),".ccapi-config.json"),CLAUDE_ENV_KEYS:{url:"ANTHROPIC_BASE_URL",key:"ANTHROPIC_API_KEY",token:"ANTHROPIC_AUTH_TOKEN",model:"ANTHROPIC_MODEL"},ERROR_MESSAGES:{CONFIG_NOT_FOUND:"配置文件未找到，请先使用 ccapi set 设置路径",SETTINGS_NOT_FOUND:"settings.json 文件不存在，请检查路径设置",API_CONFIG_NOT_FOUND:"api.json 文件不存在，请检查路径设置",INVALID_JSON:"JSON文件格式错误",CONFIG_NAME_NOT_FOUND:"指定的配置名称不存在",SAME_CONFIG:"当前已使用该配置",BACKUP_FAILED:"settings.json 备份失败"},SUCCESS_MESSAGES:{CONFIG_SAVED:"配置路径已保存",CONFIG_SWITCHED:"配置切换成功，请重启Claude终端后生效",BACKUP_CREATED:"settings.json 已备份"}};const Bn=qn,Jn=n,{ERROR_MESSAGES:Yn}=Gn;var Kn={readJsonFile:async function(e){try{if(!await Bn.pathExists(e))throw new Error(`文件不存在: ${e}`);const t=await Bn.readFile(e,"utf8");return JSON.parse(t)}catch(t){if(t.message.includes("JSON"))throw new Error(`${Yn.INVALID_JSON}: ${e}`);throw t}},writeJsonFile:async function(e,t){try{await Bn.ensureDir(Jn.dirname(e));const n=JSON.stringify(t,null,2);await Bn.writeFile(e,n,"utf8")}catch(t){throw new Error(`写入文件失败: ${e} - ${t.message}`)}},backupFile:async function(e){try{const t=`${e}.backup`;return await Bn.copy(e,t),t}catch(e){throw new Error(`${Yn.BACKUP_FAILED}: ${e.message}`)}},fileExists:async function(e){return await Bn.pathExists(e)},validatePath:function(e){return!(!e||"string"!=typeof e)&&(!!Jn.isAbsolute(e)&&".json"===Jn.extname(e).toLowerCase())}};const{validatePath:zn}=Kn;var Qn={validateApiConfig:function(e){if(!e||"object"!=typeof e)return!1;const t=Object.keys(e);if(0===t.length)return!1;for(const n of t){const t=e[n];if(!t||"object"!=typeof t)return!1;if(!t.url||"string"!=typeof t.url)return!1;if(!t.model||"string"!=typeof t.model)return!1;if(!t.key&&!t.token)return!1}return!0},validateSettingsConfig:function(e){return!(!e||"object"!=typeof e)&&!(!e.env||"object"!=typeof e.env)},validateConfigName:function(e,t){return e&&void 0!==e[t]},validateSetCommand:function(e){const{settings:t,api:n}=e;return t||n?t&&!zn(t)?{valid:!1,error:"settings路径格式错误，请提供绝对路径的.json文件"}:n&&!zn(n)?{valid:!1,error:"api路径格式错误，请提供绝对路径的.json文件"}:{valid:!0}:{valid:!1,error:"请指定要设置的路径参数 (--settings 或 --api)"}}};const{readJsonFile:Xn,writeJsonFile:Zn,fileExists:er}=Kn,{CONFIG_FILE:tr,ERROR_MESSAGES:nr}=Gn;async function readConfig(){try{return await er(tr)?await Xn(tr):{}}catch(e){throw new Error(`读取配置失败: ${e.message}`)}}async function writeConfig(e){try{await Zn(tr,e)}catch(e){throw new Error(`保存配置失败: ${e.message}`)}}var rr={setSettingsPath:async function(e){const t=await readConfig();t.settingsPath=e,await writeConfig(t)},setApiConfigPath:async function(e){const t=await readConfig();t.apiConfigPath=e,await writeConfig(t)},validateConfig:async function(){const e=await readConfig();if(!e.settingsPath)throw new Error("未设置settings.json路径");if(!e.apiConfigPath)throw new Error("未设置api.json路径");if(!await er(e.settingsPath))throw new Error(nr.SETTINGS_NOT_FOUND);if(!await er(e.apiConfigPath))throw new Error(nr.API_CONFIG_NOT_FOUND);return e}};const ir=me,{validateSetCommand:or}=Qn,{setSettingsPath:sr,setApiConfigPath:ar}=rr,{fileExists:cr}=Kn,{SUCCESS_MESSAGES:lr}=Gn;var set=async function(e){try{const t=or(e);if(!t.valid)return void console.error(ir.red("参数错误:"),t.error);const{settings:n,api:r}=e,i=[];n&&(await cr(n)||(console.warn(ir.yellow("警告:"),`settings.json文件不存在: ${n}`),console.log(ir.gray("路径已保存，请确保文件存在后再使用其他命令"))),await sr(n),i.push(`settings.json 路径: ${ir.green(n)}`)),r&&(await cr(r)||(console.warn(ir.yellow("警告:"),`api.json文件不存在: ${r}`),console.log(ir.gray("路径已保存，请确保文件存在后再使用其他命令"))),await ar(r),i.push(`api.json 路径: ${ir.green(r)}`)),console.log(ir.blue(lr.CONFIG_SAVED)),i.forEach(e=>console.log(`  ${e}`))}catch(e){console.error(ir.red("设置失败:"),e.message),process.exit(1)}};const ur=me,{validateConfig:hr}=rr,{readJsonFile:pr}=Kn,{validateApiConfig:dr,validateSettingsConfig:mr}=Qn,{CLAUDE_ENV_KEYS:fr}=Gn;var list=async function(){try{const e=await hr(),t=await pr(e.apiConfigPath);if(!dr(t))return void console.error(ur.red("错误:"),"api.json文件格式不正确");const n=await pr(e.settingsPath);if(!mr(n))return void console.error(ur.red("错误:"),"settings.json文件格式不正确");const r=function(e,t){const n=e.env?.[fr.url];if(!n)return null;for(const[e,r]of Object.entries(t))if(r.url===n)return e;return null}(n,t);console.log(ur.blue.bold("可用的API配置:")),console.log();const i=Object.keys(t);if(0===i.length)return void console.log(ur.yellow("暂无可用配置"));i.sort().forEach(e=>{const n=e===r;!function(e,t,n=!1){const r=n?ur.green("* "):"  ",i=n?ur.green.bold(e):ur.cyan(e);let o=[];if(o.push(`URL: ${ur.gray(t.url)}`),o.push(`Model: ${ur.gray(t.model)}`),t.key){const e=t.key.length>8?t.key.slice(0,8)+"...":t.key;o.push(`Key: ${ur.gray(e)}`)}if(t.token){const e=t.token.length>8?t.token.slice(0,8)+"...":t.token;o.push(`Token: ${ur.gray(e)}`)}console.log(`${r}${i}`),o.forEach(e=>{console.log(`    ${e}`)})}(e,t[e],n),console.log()}),r?console.log(ur.green(`当前使用: ${r}`)):console.log(ur.yellow("当前未匹配到任何配置（可能是自定义配置）"))}catch(e){e.message.includes("未设置")||e.message.includes("不存在")?(console.error(ur.red("配置错误:"),e.message),console.log(ur.gray("请先使用"),ur.cyan("ccapi set"),ur.gray("命令设置配置文件路径"))):console.error(ur.red("列举配置失败:"),e.message),process.exit(1)}};const gr=me,{validateConfig:yr}=rr,{readJsonFile:wr,writeJsonFile:br,backupFile:vr}=Kn,{validateApiConfig:_r,validateSettingsConfig:Sr,validateConfigName:Or}=Qn,{CLAUDE_ENV_KEYS:Cr,ERROR_MESSAGES:Er,SUCCESS_MESSAGES:kr}=Gn;var use=async function(e){try{const t=await yr(),n=await wr(t.apiConfigPath);if(!_r(n))return void console.error(gr.red("错误:"),"api.json文件格式不正确");if(!Or(n,e))return console.error(gr.red("错误:"),`${Er.CONFIG_NAME_NOT_FOUND}: ${e}`),void console.log(gr.gray("可用配置:"),Object.keys(n).join(", "));const r=await wr(t.settingsPath);if(!Sr(r))return void console.error(gr.red("错误:"),"settings.json文件格式不正确");const i=n[e];if(function(e,t){const n=e.env||{};return n[Cr.url]===t.url&&n[Cr.model]===t.model}(r,i))return void console.log(gr.yellow(Er.SAME_CONFIG));console.log(gr.gray("正在备份settings.json..."));const o=await vr(t.settingsPath);console.log(gr.green(kr.BACKUP_CREATED),gr.gray(`(${o})`)),console.log(gr.gray(`正在切换到配置: ${e}...`));const s=function(e,t){e.env||(e.env={});const n=e.env;return n[Cr.url]=t.url,n[Cr.model]=t.model||"claude-sonnet-4-20250514",t.key&&t.token?(n[Cr.key]=t.key,n[Cr.token]=t.token):(t.key&&(n[Cr.key]=t.key,delete n[Cr.token]),t.token&&(n[Cr.token]=t.token,delete n[Cr.key])),e}(r,i);if(await br(t.settingsPath,s),console.log(),console.log(gr.green.bold(kr.CONFIG_SWITCHED)),console.log(),console.log(gr.blue("配置详情:")),console.log(`  名称: ${gr.cyan(e)}`),console.log(`  URL: ${gr.gray(i.url)}`),console.log(`  Model: ${gr.gray(i.model)}`),i.key){const e=i.key.length>8?i.key.slice(0,8)+"...":i.key;console.log(`  Key: ${gr.gray(e)}`)}if(i.token){const e=i.token.length>8?i.token.slice(0,8)+"...":i.token;console.log(`  Token: ${gr.gray(e)}`)}}catch(e){e.message.includes("未设置")||e.message.includes("不存在")?(console.error(gr.red("配置错误:"),e.message),console.log(gr.gray("请先使用"),gr.cyan("ccapi set"),gr.gray("命令设置配置文件路径"))):console.error(gr.red("切换配置失败:"),e.message),process.exit(1)}};const{Command:Ar}=U,Fr=me,xr=fe,$r=version,Pr=set,Nr=list,Ir=use,Dr=new Ar;Dr.name("ccapi").description("Claude settings.json配置管理工具").version(xr.version),Dr.option("-v, --version","显示版本信息").action(e=>{e.version&&$r()}),Dr.command("set").description("设置配置文件路径").option("--settings <path>","Claude settings.json文件路径").option("--api <path>","API配置文件路径").action(Pr),Dr.command("ls").description("显示当前API配置列表").action(Nr),Dr.command("use <name>").description("切换到指定的API配置").action(Ir),process.on("uncaughtException",e=>{console.error(Fr.red("程序错误:"),e.message),"development"===process.env.NODE_ENV&&console.error(e.stack),process.exit(1)}),process.on("unhandledRejection",(e,t)=>{console.error(Fr.red("未处理的Promise错误:"),e),"development"===process.env.NODE_ENV&&console.error("Promise:",t),process.exit(1)}),Dr.parse(process.argv),process.argv.slice(2).length||Dr.outputHelp(),module.exports={};
